var tapscript=function(e){"use strict";function t(e){let t,n=0;const r=e.reduce(((e,t)=>e+t.length),0),s=new Uint8Array(r);for(const r of e)for(t=0;t<r.length;n++,t++)s[n]=r[t];return s}const n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(e,t,r,s,i){let a,o,u,c,h,f,d,l,p,m,g,y,w;for(;i>=64;){for(a=t[0],o=t[1],u=t[2],c=t[3],h=t[4],f=t[5],d=t[6],l=t[7],m=0;m<16;m++)g=s+4*m,e[m]=(255&r[g])<<24|(255&r[g+1])<<16|(255&r[g+2])<<8|255&r[g+3];for(m=16;m<64;m++)p=e[m-2],y=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=e[m-15],w=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[m]=(y+e[m-7]|0)+(w+e[m-16]|0);for(m=0;m<64;m++)y=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&f^~h&d)|0)+(l+(n[m]+e[m]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&o^a&u^o&u)|0,l=d,d=f,f=h,h=c+y|0,c=u,u=o,o=a,a=y+w|0;t[0]+=a,t[1]+=o,t[2]+=u,t[3]+=c,t[4]+=h,t[5]+=f,t[6]+=d,t[7]+=l,s+=64,i-=64}return s}let s=class{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=r(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this}finish(e){if(!this.finished){const e=this.bytesHashed,t=this.bufferLength,n=e/536870912|0,s=e<<3,i=e%64<56?64:128;this.buffer[t]=128;for(let e=t+1;e<i-8;e++)this.buffer[e]=0;this.buffer[i-8]=n>>>24&255,this.buffer[i-7]=n>>>16&255,this.buffer[i-6]=n>>>8&255,this.buffer[i-5]=n>>>0&255,this.buffer[i-4]=s>>>24&255,this.buffer[i-3]=s>>>16&255,this.buffer[i-2]=s>>>8&255,this.buffer[i-1]=s>>>0&255,r(this.temp,this.state,this.buffer,0,i),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}},i=class{constructor(e){this.inner=new s,this.outer=new s,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;const t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new s).update(e).finish(t).clean();else for(let n=0;n<e.length;n++)t[n]=e[n];for(let e=0;e<t.length;e++)t[e]^=54;this.inner.update(t);for(let e=0;e<t.length;e++)t[e]^=106;this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(let e=0;e<t.length;e++)t[e]=0}reset(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this}clean(){for(let e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()}update(e){return this.inner.update(e),this}finish(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}};function a(e){const t=(new s).update(e),n=t.digest();return t.clean(),n}function o(e){return a(a(e))}const u=new TextEncoder,c=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function h(e){for(const t of c)if(t.name===e)return t.charset;throw TypeError("Charset does not exist: "+e)}const f={encode:function(e,t,n=!1){"string"==typeof e&&(e=u.encode(e));const r=h(t),s=r.length,i=[];let a,o,c,f="",d=0;for(a=0;a<e.length;a++)for(d=0,o=e[a],f+=o>0||(f.length^a)>0?"":"1";d in i||o>0;)c=i[d],c=c>0?256*c+o:o,o=c/s|0,i[d]=c%s,d++;for(;d-- >0;)f+=r[i[d]];return n&&f.length%4>0?f+"=".repeat(4-f.length%4):f},decode:function(e,t){const n=h(t),r=n.length,s=[],i=[];e=e.replace("=","");let a,o,u,c=0;for(a=0;a<e.length;a++){if(c=0,o=n.indexOf(e[a]),o<0)throw new Error(`Character range out of bounds: ${o}`);for(o>0||(i.length^a)>0||i.push(0);c in s||o>0;)u=s[c],u=u>0?u*r+o:o,o=u>>8,s[c]=u%256,c++}for(;c-- >0;)i.push(s[c]);return new Uint8Array(i)}},d=e=>{const n=function(e){return t([e,o(e).slice(0,4)])}(e);return f.encode(n,"base58")},l=e=>function(e){const t=e.slice(0,-4),n=e.slice(-4);if(o(t).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return t}(f.decode(e,"base58")),p="qpzry9x8gf2tvdw0s3jn54khce6mua7l",m=[996825010,642813549,513874426,1027748829,705979059],g=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function y(e){let t=1;for(let n=0;n<e.length;++n){const r=t>>25;t=(33554431&t)<<5^e[n];for(let e=0;e<5;++e)0!=(r>>e&1)&&(t^=m[e])}return t}function w(e){const t=[];let n;for(n=0;n<e.length;++n)t.push(e.charCodeAt(n)>>5);for(t.push(0),n=0;n<e.length;++n)t.push(31&e.charCodeAt(n));return t}function v(e,t,n,r=!0){const s=[];let i=0,a=0;const o=(1<<n)-1,u=(1<<t+n-1)-1;for(const r of e){if(r<0||r>>t>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(r));for(i=(i<<t|r)&u,a+=t;a>=n;)a-=n,s.push(i>>a&o)}if(r)a>0&&s.push(i<<n-a&o);else if(a>=t||(i<<n-a&o)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function b(e,t,n){const r=t.concat(function(e,t,n){const r=y(w(e).concat(t).concat([0,0,0,0,0,0]))^n.const,s=[];for(let e=0;e<6;++e)s.push(r>>5*(5-e)&31);return s}(e,t,n));let s=e+"1";for(let e=0;e<r.length;++e)s+=p.charAt(r[e]);return s}function _(e){if(!function(e){let t,n,r=!1,s=!1;for(t=0;t<e.length;++t){if(n=e.charCodeAt(t),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!r||!s}(e))throw new Error("Encoded string goes out of bounds!");if(!function(e){const t=e.lastIndexOf("1");return!(t<1||t+7>e.length||e.length>90)}(e=e.toLowerCase()))throw new Error("Encoded string has invalid separator!");const t=[],n=e.lastIndexOf("1"),r=e.substring(0,n);for(let r=n+1;r<e.length;++r){const n=p.indexOf(e.charAt(r));if(-1===n)throw new Error("Character idx out of bounds: "+String(r));t.push(n)}const s=g.find((e=>e.version===t[0]))??g[0];if(!function(e,t,n){return y(w(e).concat(t))===n.const}(r,t,s))throw new Error("Checksum verification failed!");return[r,t.slice(0,t.length-6)]}function x(e){const t=(e=e.toLowerCase()).split("1",1)[0],[n,r]=_(e),s=v(r.slice(1),5,8,!1),i=s.length;switch(!0){case t!==n:throw new Error("Returned hrp string is invalid.");case null===s||i<2||i>40:throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}const S={encode:function(e,t="bc",n=0){const r=b(t,[n,...v([...e],8,5)],g.find((e=>e.version===n))??g[0]);return x(r),r},decode:x,version:function(e){e=e.toLowerCase();const[t,n]=_(e);return n[0]}},E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",O=new TextEncoder;function k(e,t=!1){"string"==typeof e&&(e=O.encode(e));const n=t?A:E;let r="",s=0,i=0;for(let t=0;t<e.length;t++)for(i=i<<8|e[t],s+=8;s>=6;)s-=6,r+=n[i>>s&63];if(s>0)for(i<<=6-s,r+=n[63&i];s<6;)r+=t?"":"=",s+=2;return r}function P(e,t=!1){const n=t||e.includes("-")||e.includes("_")?A.split(""):E.split(""),r=(e=e.replace(/=+$/,"")).split("");let s=0,i=0;const a=[];for(let e=0;e<r.length;e++){const t=r[e],o=n.indexOf(t);if(-1===o)throw new Error("Invalid character: "+t);s+=6,i<<=6,i|=o,s>=8&&(s-=8,a.push(i>>>s&255))}return new Uint8Array(a)}const T={encode:k,decode:P},I=e=>k(e,!0),U=e=>P(e,!0),N=new TextEncoder,C=new TextDecoder;function Z(e){return N.encode(e)}function z(e){const t=new Uint8Array(e.length/2);let n,r=0;if(null!==e.match(/[^a-fA-f0-9]/))throw new TypeError("Invalid hex string: "+e);if(e.length%2>0)throw new Error(`Hex string length is uneven: ${e.length}`);for(n=0;n<e.length;n+=2)t[r]=parseInt(e.slice(n,n+2),16),r+=1;return t}function j(e){if(0===e)return Uint8Array.of(0);const t=[];for(;e>0;){const n=255&e;t.push(n),e=(e-n)/256}return new Uint8Array(t)}function B(e){const t=new Array(8*e.length);let n=0;for(const r of e){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let e=7;e>=0;e--,n++)t[n]=r>>e&1}return t}function R(e){if(0n===e)return Uint8Array.of(0);const t=[];for(;e>0n;){const n=0xffn&e;t.push(Number(n)),e=(e-n)/256n}return new Uint8Array(t)}function H(e){return C.decode(e)}function L(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t.push(e[n].toString(16).padStart(2,"0"));return t.join("")}function D(e){let t,n=0;for(t=e.length-1;t>=0;t--)n=256*n+e[t];return Number(n)}function $(e){let t,n=0n;for(t=e.length-1;t>=0;t--)n=256n*n+BigInt(e[t]);return BigInt(n)}function M(e,t=!0){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;switch(typeof e){case"bigint":return R(e);case"boolean":return Uint8Array.of(e?1:0);case"number":return j(e);case"string":return t?z(e):N.encode(e);default:throw TypeError("Unsupported format:"+String(typeof e))}}function K(e){if("object"==typeof e){if(e instanceof Uint8Array)return e;try{return Z(JSON.stringify(e))}catch{throw TypeError("Object is not serializable.")}}return M(e,!1)}function V(e){let t=0n;for(let n=e.length-1;n>=0;n--)t=256n*t+BigInt(e[n]);return BigInt(t)}function q(e,t=0){const n=[];for(;e>0;){const t=0xffn&e;n.push(t),e=(e-t)/256n}let r=Uint8Array.from(n.map((e=>Number(e))));if(0!==t){const e=new Uint8Array(t);e.set(r),r=e}return r}const W=[0n,1n,2n,3n,4n,5n,6n,7n,8n,9n,10n,11n,12n,13n,14n,15n,7n,4n,13n,1n,10n,6n,15n,3n,12n,0n,9n,5n,2n,14n,11n,8n,3n,10n,14n,4n,9n,15n,8n,1n,2n,7n,0n,6n,13n,11n,5n,12n,1n,9n,11n,10n,0n,8n,12n,4n,13n,3n,7n,15n,14n,5n,6n,2n,4n,0n,5n,9n,7n,12n,2n,10n,14n,1n,3n,8n,11n,6n,15n,13n],F=[5n,14n,7n,0n,9n,2n,11n,4n,13n,6n,15n,8n,1n,10n,3n,12n,6n,11n,3n,7n,0n,13n,5n,10n,14n,15n,8n,12n,4n,9n,1n,2n,15n,5n,1n,3n,7n,14n,6n,9n,11n,8n,12n,2n,10n,0n,4n,13n,8n,6n,4n,1n,3n,11n,15n,0n,5n,12n,2n,13n,9n,7n,10n,14n,12n,15n,10n,4n,1n,5n,8n,7n,6n,2n,13n,14n,0n,3n,9n,11n],Y=[11n,14n,15n,12n,5n,8n,7n,9n,11n,13n,14n,15n,6n,7n,9n,8n,7n,6n,8n,13n,11n,9n,7n,15n,7n,12n,15n,9n,11n,7n,13n,12n,11n,13n,6n,7n,14n,9n,13n,15n,14n,8n,13n,6n,5n,12n,7n,5n,11n,12n,14n,15n,14n,15n,9n,8n,9n,14n,5n,6n,8n,6n,5n,12n,9n,15n,5n,11n,6n,8n,13n,12n,5n,12n,13n,14n,11n,8n,5n,6n],J=[8n,9n,9n,11n,13n,15n,15n,5n,7n,7n,8n,11n,14n,14n,12n,6n,9n,13n,15n,7n,12n,8n,9n,11n,7n,7n,12n,7n,6n,15n,13n,11n,9n,7n,15n,11n,8n,6n,6n,14n,12n,13n,5n,14n,13n,13n,7n,5n,15n,5n,8n,11n,14n,14n,6n,14n,6n,9n,12n,9n,12n,5n,15n,8n,8n,5n,12n,9n,12n,5n,14n,6n,8n,13n,6n,5n,15n,13n,11n,11n],G=[0n,0x5a827999n,0x6ed9eba1n,0x8f1bbcdcn,0xa953fd4en],X=[0x50a28be6n,0x5c4dd124n,0x6d703ef3n,0x7a6d76e9n,0n];function Q(e,t,n,r){switch(!0){case 0n===r:return e^t^n;case 1n===r:return e&t|~e&n;case 2n===r:return(e|~t)^n;case 3n===r:return e&n|t&~n;case 4n===r:return e^(t|~n);default:throw new TypeError("Unknown I value: "+String(r))}}function ee(e,t){return 0xffffffffn&(e<<t|(0xffffffffn&e)>>32n-t)}function te(e,t,n,r,s,i){const a=[];let o,u,c,h,f,d,l,p=e,m=t,g=n,y=r,w=s,v=e,b=t,_=n,x=r,S=s;for(let e=0;e<16;e++){const t=V(i.slice(4*e,4*(e+1)));a.push(t)}for(let e=0;e<80;e++)o=BigInt(e)>>4n,h=a[Number(W[e])],f=G[Number(o)],d=a[Number(F[e])],l=X[Number(o)],p=ee(p+Q(m,g,y,o)+h+f,Y[e])+w,u=w,w=y,y=ee(g,10n),g=m,m=p,p=u,v=ee(v+Q(b,_,x,4n-o)+d+l,J[e])+S,c=S,S=x,x=ee(_,10n),_=b,b=v,v=c;return[t+g+x,n+y+S,r+w+v,s+p+b,e+m+_]}function ne(e){let t=[0x67452301n,0xefcdab89n,0x98badcfen,0x10325476n,0xc3d2e1f0n];for(let n=0;n<e.length>>6;n++)t=te(...t,e.slice(64*n,64*(n+1)));const n=[128,...new Array(119-e.length&63).fill(0)],r=Uint8Array.from([...e.slice(-64&e.length),...n,...q(BigInt(8*e.length),8)]);for(let e=0;e<r.length>>6;e++)t=te(...t,r.slice(64*e,64*(e+1)));const s=[];for(let e=0;e<t.length;e++){const n=0xffffffffn&t[e];s.push(...q(n,4))}return Uint8Array.from(s)}const re=globalThis.crypto;let se=class extends Uint8Array{static{this.num=(e,t,n="le")=>{const r=new se(j(e),t);return"le"===n?r.reverse():r}}static{this.big=(e,t,n="le")=>{const r=new se(R(e),t);return"le"===n?r.reverse():r}}static{this.bin=(e,t)=>new se(function(e){if("string"==typeof e)e=e.split("").map(Number);else if(!Array.isArray(e))throw new Error("Invalid input type: expected a string or an array of numbers.");if(e.length%8!=0)throw new Error(`Binary array is invalid length: ${e.length}`);const t=new Uint8Array(e.length/8);for(let n=0,r=0;n<e.length;n+=8,r++){let s=0;for(let t=0;t<8;t++)s|=e[n+t]<<7-t;t[r]=s}return t}(e),t)}static{this.any=(e,t)=>new se(M(e,!1),t)}static{this.raw=(e,t)=>new se(e,t)}static{this.str=(e,t)=>new se(Z(e),t)}static{this.hex=(e,t)=>new se(z(e),t)}static{this.json=e=>new se(Z(JSON.stringify(e)))}static{this.data=(e,t)=>new se(K(e),t)}static{this.bytes=(e,t)=>new se(M(e,!0),t)}static{this.base64=e=>new se(T.decode(e))}static{this.b64url=e=>new se(U(e))}static{this.bech32=e=>new se(S.decode(e))}static{this.b58check=e=>new se(l(e))}constructor(e,t){if(e=M(e,!0),"number"==typeof t){const n=new Uint8Array(t).fill(0);n.set(new Uint8Array(e)),e=n.buffer}return super(e),this}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new ie(this)}toNum(e="le"){return D("le"===e?this.reverse():this)}toBig(e="le"){return $("le"===e?this.reverse():this)}toHash(e="sha256"){switch(e){case"sha256":return new se(a(this));case"hash256":return new se(a(a(this)));case"ripe160":return new se(ne(this));case"hash160":return new se(ne(a(this)));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e){return"string"==typeof e&&(e=Z(e)),new se(function(e,t){const n=new i(e).update(t),r=n.digest();return n.clean(),r}(e,this))}toStr(){return H(this)}toHex(){return L(this)}toJson(){return JSON.parse(H(this))}toBytes(){return new Uint8Array(this)}toBits(){return B(this)}toBin(){return B(this).join("")}tob58check(){return d(this)}toB64url(){return I(this)}toBase64(){return T.encode(this)}toBech32(e,t=0){return S.encode(this,e,t)}prepend(e){return se.join([se.bytes(e),this])}append(e){return se.join([this,se.bytes(e)])}slice(e,t){return new se(new Uint8Array(this).slice(e,t))}reverse(){return new se(new Uint8Array(this).reverse())}write(e,t){this.set(e,t)}prefixSize(e){const t=se.varInt(this.length,e);return se.join([t,this])}static from(e){return new se(Uint8Array.from(e))}static of(...e){return new se(Uint8Array.of(...e))}static join(e){const n=e.map((e=>se.bytes(e)));return new se(t(n))}static varInt(e,t){if(e<253)return se.num(e,1);if(e<65536)return se.of(253,...se.num(e,2,t));if(e<4294967296)return se.of(254,...se.num(e,4,t));if(BigInt(e)<0x10000000000000000n)return se.of(255,...se.num(e,8,t));throw new Error(`Value is too large: ${e}`)}static{this.encode=Z}static{this.decode=H}static random(e=32){return new se(re.getRandomValues(new Uint8Array(e)))}static normalize(e,t){return new se(M(e,!0),t)}static hexify(e){return function(e){return L(e=M(e,!0))}(e)}static serialize(e,t){return new se(K(e),t)}static revive(e){return function(e){if(e instanceof Uint8Array&&(e=H(e)),"string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}(e)}};class ie{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > ${this.size}`);return new se(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();const t=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,t}readSize(){const e=this.read(1).toNum();switch(!0){case e>=0&&e<253:return e;case 253===e:return this.read(2).toNum();case 254===e:return this.read(4).toNum();case 255===e:return this.read(8).toNum();default:throw new Error(`Varint is out of range: ${e}`)}}}function ae(e,t="main"){const n="main"===t?["1"]:["m","n"];for(const t of n)if(e.startsWith(t))return!0;return!1}const oe={check:ae,encode:function(e,t="main"){const n=se.bytes(e),r="main"===t?se.num(0):se.num(111);if(33!==n.length)throw new Error("Invalid key size: "+String(n.length));return n.toHash("hash160").prepend(r).tob58check()},decode:function(e,t="main"){if(!ae(e,t))throw new TypeError("Invalid p2pkh address!");return se.b58check(e)},script:function(e){return["OP_DUP","OP_HASH160",e,"OP_EQUALVERIFY","OP_CHECKSIG"]}},ue={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_SUCCESS80:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_SUCCESS98:98,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_SUCCESS126:126,OP_SUCCESS127:127,OP_SUCCESS128:128,OP_SUCCESS129:129,OP_SIZE:130,OP_SUCCESS131:131,OP_SUCCESS132:132,OP_SUCCESS133:133,OP_SUCCESS134:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_SUCCESS137:137,OP_SUCCESS138:138,OP_1ADD:139,OP_1SUB:140,OP_SUCCESS141:141,OP_SUCCESS142:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_SUCCESS149:149,OP_SUCCESS150:150,OP_SUCCESS151:151,OP_SUCCESS152:152,OP_SUCCESS153:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186};function ce(e){if(e>186&&e<255)return"OP_SUCCESS"+String(e);for(const[t,n]of Object.entries(ue))if(n===e)return t;throw new Error("OPCODE not found:"+String(e))}function he(e){switch(!0){case 0===e:return"opcode";case e>=1&&e<=75:return"varint";case 76===e:return"pushdata1";case 77===e:return"pushdata2";case 78===e:return"pushdata4";case e<=254:return"opcode";default:throw new Error(`Invalid word range: ${e}`)}}function fe(e){switch(!0){case"number"!=typeof e:return!1;case 0===e:return!0;case[].includes(e):return!1;case 75<e&&e<254:return!0;default:return!1}}const de=520;function le(e=[],t=!0){let n=se.num(0);return Array.isArray(e)&&(n=se.raw(pe(e))),"string"==typeof e&&(n=se.hex(e)),e instanceof Uint8Array&&(n=se.raw(e)),t&&(n=n.prefixSize("be")),n.raw}function pe(e){const t=[];for(const n of e)t.push(me(n));return t.length>0?se.join(t):new Uint8Array}function me(e){let t=new Uint8Array;if("string"==typeof e){if(e.startsWith("OP_"))return se.num(function(e){for(const[t,n]of Object.entries(ue))if(t===e)return Number(n);throw new Error("OPCODE not found:"+e)}(e),1);e.startsWith("STR_")&&(t=se.str(e.slice(3))),t=se.hex(e)}if("number"==typeof e&&(t=se.num(e)),e instanceof Uint8Array&&(t=e),t.length>de){const e=function(e){const t=[],n=new ie(e);for(;n.size>de;)t.push(n.read(de));return t.push(n.read(n.size)),t}(t);return pe(e)}return se.join([ge(t.length),t])}function ge(e){const t=se.num(76,1),n=se.num(77,1);switch(!0){case e<=75:return se.num(e);case e>75&&e<256:return se.join([t,se.num(e,1)]);case e>=256&&e<=de:return se.join([n,se.num(e,2,"be")]);default:throw new Error("Invalid word size:"+e.toString())}}function ye(e,t){return function(e,t="asm"){const n=new ie(e),r=[],s=n.size;let i,a,o,u=0;for(;u<s;)switch(i=n.read(1).num,a=he(i),u++,a){case"varint":r.push(n.read(i).hex),u+=i;break;case"pushdata1":o=n.read(1).reverse().num,r.push(n.read(o).hex),u+=o+1;break;case"pushdata2":o=n.read(2).reverse().num,r.push(n.read(o).hex),u+=o+2;break;case"pushdata4":o=n.read(4).reverse().num,r.push(n.read(o).hex),u+=o+4;break;case"opcode":if(!fe(i))throw new Error(`Invalid OPCODE: ${i}`);r.push("asm"===t?ce(i):se.num(i).hex);break;default:throw new Error(`Word type undefined: ${i}`)}return r}(se.normalize(e),t)}function we(e){if(void 0===e)throw new Error("Script data is undefined!");if(Array.isArray(e))throw new Error("Script data is an array!");return se.normalize(e)}const ve={encode:le,decode:ye};function be(e,t="main"){const n="main"===t?["3"]:["2"];for(const t of n)if(e.startsWith(t))return!0;return!1}const _e={check:be,encode:function(e,t="main"){const n="main"===t?se.num(5):se.num(196);return se.bytes(ve.encode(e)).toHash("hash160").prepend(n).tob58check()},decode:function(e,t="main"){if(!be(e,t))throw new TypeError("Invalid p2sh address!");return se.b58check(e)},script:function(e){return["OP_HASH160",e,"OP_EQUAL"]}},xe={1:["p2pkh","main"],3:["p2sh","main"],m:["p2pkh","testnet"],n:["p2pkh","testnet"],2:["p2sh","testnet"],bc1q:["p2w","main"],tb1q:["p2w","testnet"],bcrt1q:["p2w","regtest"],bc1p:["p2tr","main"],tb1p:["p2tr","testnet"],bcrt1p:["p2tr","regtest"]},Se={main:"bc",testnet:"tb",signet:"tb",regtest:"bcrt"},Ee=["bc1q","tb1q","bcrt1q"];function Ae(e){for(const t of Ee)if(e.startsWith(t))return!0;return!1}const Oe={check:Ae,encode:function(e,t="main"){let n=se.bytes(e);const r=Se[t];if(33!==n.length&&32!==n.length)throw new Error("Key length is an invalid size: "+String(n.length));return 33===n.length&&(n=n.toHash("hash160")),n.toBech32(r,0)},decode:function(e){if(!Ae(e))throw new TypeError("Invalid segwit address!");return se.bech32(e)},script:function(e){return["00",e]}},ke=["bc1p","tb1p","bcrt1p"];function Pe(e){for(const t of ke)if(e.startsWith(t))return!0;return!1}const Te={check:Pe,encode:function(e,t="main"){const n=se.bytes(e),r=Se[t];if(32!==n.length)throw new Error("Key length is an invalid size: "+String(n.length));return n.toBech32(r,1)},decode:function(e){if(!Pe(e))throw new TypeError("Invalid taproot address!");return se.bech32(e)},script:function(e){return["OP_1",e]}},Ie={p2pkh:oe,p2sh:_e,p2w:Oe,p2tr:Te};function Ue(e){for(const t of Object.keys(xe))if(e.startsWith(t))return xe[t];throw new Error("Unable to detect address type!")}const Ne={P2PKH:oe,P2SH:_e,P2W:Oe,P2TR:Te,getType:Ue,convert:function(e){const[t,n]=Ue(e),r=Ie[t],s=r.decode(e,n).hex;return r.script(s)}},Ce=function(){if("undefined"!=typeof globalThis)return globalThis.crypto;if("undefined"!=typeof window)return window.crypto;throw new Error("Must be using https in browser, or node/deno environment that supports globalthis.crypto object!")}();
    /*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const Ze=BigInt(0),ze=BigInt(1),je=BigInt(2),Be=BigInt(3),Re=BigInt(8),He=Object.freeze({a:Ze,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ze,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Le=(e,t)=>(e+t/je)/t,De={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=He,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=Le(i*e,t),u=Le(-r*e,t);let c=mt(e-o*n-u*s,t),h=mt(-o*r-u*i,t);const f=c>a,d=h>a;if(f&&(c=t-c),d&&(h=t-h),c>a||h>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:d,k2:h}}},$e=32,Me=32,Ke=33,Ve=65;function qe(e){const{a:t,b:n}=He,r=mt(e*e),s=mt(r*e);return mt(s+t*e+n)}const We=He.a===Ze;class Fe extends Error{constructor(e){super(e)}}function Ye(e){if(!(e instanceof Je))throw new TypeError("JacobianPoint expected")}class Je{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static get BASE(){return new Je(He.Gx,He.Gy,ze)}static get ZERO(){return new Je(Ze,ze,Ze)}static fromAffine(e){if(!(e instanceof Qe))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Qe.ZERO)?Je.ZERO:new Je(e.x,e.y,ze)}static toAffineBatch(e){const t=function(e,t=He.P){const n=new Array(e.length),r=yt(e.reduce(((e,r,s)=>r===Ze?e:(n[s]=e,mt(e*r,t))),ze),t);return e.reduceRight(((e,r,s)=>r===Ze?e:(n[s]=mt(e*n[s],t),mt(e*r,t))),r),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return Je.toAffineBatch(e).map(Je.fromAffine)}equals(e){Ye(e);const{x:t,y:n,z:r}=this,{x:s,y:i,z:a}=e,o=mt(r*r),u=mt(a*a),c=mt(t*u),h=mt(s*o),f=mt(mt(n*a)*u),d=mt(mt(i*r)*o);return c===h&&f===d}negate(){return new Je(this.x,mt(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,r=mt(e*e),s=mt(t*t),i=mt(s*s),a=e+s,o=mt(je*(mt(a*a)-r-i)),u=mt(Be*r),c=mt(u*u),h=mt(c-je*o),f=mt(u*(o-h)-Re*i),d=mt(je*t*n);return new Je(h,f,d)}add(e){Ye(e);const{x:t,y:n,z:r}=this,{x:s,y:i,z:a}=e;if(s===Ze||i===Ze)return this;if(t===Ze||n===Ze)return e;const o=mt(r*r),u=mt(a*a),c=mt(t*u),h=mt(s*o),f=mt(mt(n*a)*u),d=mt(mt(i*r)*o),l=mt(h-c),p=mt(d-f);if(l===Ze)return p===Ze?this.double():Je.ZERO;const m=mt(l*l),g=mt(l*m),y=mt(c*m),w=mt(p*p-g-je*y),v=mt(p*(y-w)-f*g),b=mt(r*a*l);return new Je(w,v,b)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=Je.ZERO;if("bigint"==typeof e&&e===Ze)return t;let n=pt(e);if(n===ze)return this;if(!We){let e=t,r=this;for(;n>Ze;)n&ze&&(e=e.add(r)),r=r.double(),n>>=ze;return e}let{k1neg:r,k1:s,k2neg:i,k2:a}=De.splitScalar(n),o=t,u=t,c=this;for(;s>Ze||a>Ze;)s&ze&&(o=o.add(c)),a&ze&&(u=u.add(c)),c=c.double(),s>>=ze,a>>=ze;return r&&(o=o.negate()),i&&(u=u.negate()),u=new Je(mt(u.x*De.beta),u.y,u.z),o.add(u)}precomputeWindow(e){const t=We?128/e+1:256/e+1,n=[];let r=this,s=r;for(let i=0;i<t;i++){s=r,n.push(s);for(let t=1;t<2**(e-1);t++)s=s.add(r),n.push(s);r=s.double()}return n}wNAF(e,t){!t&&this.equals(Je.BASE)&&(t=Qe.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&Xe.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=Je.normalizeZ(r),Xe.set(t,r)));let s=Je.ZERO,i=Je.BASE;const a=1+(We?128/n:256/n),o=2**(n-1),u=BigInt(2**n-1),c=2**n,h=BigInt(n);for(let t=0;t<a;t++){const n=t*o;let a=Number(e&u);e>>=h,a>o&&(a-=c,e+=ze);const f=n,d=n+Math.abs(a)-1,l=t%2!=0,p=a<0;0===a?i=i.add(Ge(l,r[f])):s=s.add(Ge(p,r[d]))}return{p:s,f:i}}multiply(e,t){let n,r,s=pt(e);if(We){const{k1neg:e,k1:i,k2neg:a,k2:o}=De.splitScalar(s);let{p:u,f:c}=this.wNAF(i,t),{p:h,f:f}=this.wNAF(o,t);u=Ge(e,u),h=Ge(a,h),h=new Je(mt(h.x*De.beta),h.y,h.z),n=u.add(h),r=c.add(f)}else{const{p:e,f:i}=this.wNAF(s,t);n=e,r=i}return Je.normalizeZ([n,r])[0]}toAffine(e){const{x:t,y:n,z:r}=this,s=this.equals(Je.ZERO);null==e&&(e=s?Re:yt(r));const i=e,a=mt(i*i),o=mt(a*i),u=mt(t*a),c=mt(n*o),h=mt(r*i);if(s)return Qe.ZERO;if(h!==ze)throw new Error("invZ was invalid");return new Qe(u,c)}}function Ge(e,t){const n=t.negate();return e?n:t}const Xe=new WeakMap;let Qe=class{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Xe.delete(this)}static get BASE(){return new Qe(He.Gx,He.Gy)}static get ZERO(){return new Qe(Ze,Ze)}hasEvenY(){return this.y%je===Ze}static fromCompressedHex(e){const t=32===e.length,n=dt(t?e:e.subarray(1));if(!_t(n))throw new Error("Point is not on curve");let r=function(e){const{P:t}=He,n=BigInt(6),r=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),o=BigInt(88),u=e*e*e%t,c=u*u*e%t,h=gt(c,Be)*c%t,f=gt(h,Be)*c%t,d=gt(f,je)*u%t,l=gt(d,r)*d%t,p=gt(l,s)*l%t,m=gt(p,a)*p%t,g=gt(m,o)*m%t,y=gt(g,a)*p%t,w=gt(y,Be)*c%t,v=gt(w,i)*l%t,b=gt(v,n)*u%t,_=gt(b,je);if(_*_%t!==e)throw new Error("Cannot find square root");return _}(qe(n));const s=(r&ze)===ze;if(t)s&&(r=mt(-r));else{1==(1&e[0])!==s&&(r=mt(-r))}const i=new Qe(n,r);return i.assertValidity(),i}static fromUncompressedHex(e){const t=dt(e.subarray(1,33)),n=dt(e.subarray(33,65)),r=new Qe(t,n);return r.assertValidity(),r}static fromHex(e){const t=lt(e),n=t.length,r=t[0];if(n===$e)return this.fromCompressedHex(t);if(n===Ke&&(2===r||3===r))return this.fromCompressedHex(t);if(n===Ve&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Ke} compressed bytes or ${Ve} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return Qe.BASE.multiply(xt(e))}static fromSignature(e,t,n){const{r:r,s:s}=function(e){if(e instanceof nt)return e.assertValidity(),e;try{return nt.fromDER(e)}catch(t){return nt.fromCompact(e)}}(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const i=function(e,t=!1){const n=function(e){const t=8*e.length-8*Me,n=dt(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:r}=He;return n>=r?n-r:n}(lt(e)),{n:a}=He,o=2===n||3===n?r+a:r,u=yt(o,a),c=mt(-i*u,a),h=mt(s*u,a),f=1&n?"03":"02",d=Qe.fromHex(f+ot(o)),l=Qe.BASE.multiplyAndAddUnsafe(d,c,h);if(!l)throw new Error("Cannot recover signature: point at infinify");return l.assertValidity(),l}toRawBytes(e=!1){return ft(this.toHex(e))}toHex(e=!1){const t=ot(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${ot(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!_t(t)||!_t(n))throw new Error(e);const r=mt(n*n);if(mt(r-qe(t))!==Ze)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Qe(this.x,mt(-this.y))}double(){return Je.fromAffine(this).double().toAffine()}add(e){return Je.fromAffine(this).add(Je.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Je.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const r=Je.fromAffine(this),s=t===Ze||t===ze||this!==Qe.BASE?r.multiplyUnsafe(t):r.multiply(t),i=Je.fromAffine(e).multiplyUnsafe(n),a=s.add(i);return a.equals(Je.ZERO)?void 0:a.toAffine()}};function et(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function tt(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${it(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:dt(n),left:e.subarray(t+2)}}class nt{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=t?it(e):e;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new nt(ht(r.slice(0,64)),ht(r.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${it(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=tt(e.subarray(2)),{data:r,left:s}=tt(n);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${it(s)}`);return{r:t,s:r}}(t?e:ft(e));return new nt(n,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!bt(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!bt(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=He.n>>ze;return this.s>e}normalizeS(){return this.hasHighS()?new nt(this.r,mt(-this.s,He.n)):this}toDERRawBytes(){return ft(this.toDERHex())}toDERHex(){const e=et(ct(this.s)),t=et(ct(this.r)),n=e.length/2,r=t.length/2,s=ct(n),i=ct(r);return`30${ct(r+n+4)}02${i}${t}02${s}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return ft(this.toCompactHex())}toCompactHex(){return ot(this.r)+ot(this.s)}}function rt(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const st=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function it(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=st[e[n]];return t}const at=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ot(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(Ze<=e&&e<at))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function ut(e){const t=ft(ot(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function ct(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function ht(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function ft(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,s=e.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function dt(e){return ht(it(e))}function lt(e){return e instanceof Uint8Array?Uint8Array.from(e):ft(e)}function pt(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&bt(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mt(e,t=He.P){const n=e%t;return n>=Ze?n:t+n}function gt(e,t){const{P:n}=He;let r=e;for(;t-- >Ze;)r*=r,r%=n;return r}function yt(e,t=He.P){if(e===Ze||t<=Ze)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=mt(e,t),r=t,s=Ze,i=ze;for(;n!==Ze;){const e=r%n,t=s-i*(r/n);r=n,n=e,s=i,i=t}if(r!==ze)throw new Error("invert: does not exist");return mt(s,t)}let wt,vt;function bt(e){return Ze<e&&e<He.n}function _t(e){return Ze<e&&e<He.P}function xt(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*Me)throw new Error("Expected 32 bytes of private key");t=ht(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==Me)throw new Error("Expected 32 bytes of private key");t=dt(e)}if(!bt(t))throw new Error("Expected private key: 0 < key < n");return t}function St(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===Ke||r===Ve:n?r===2*Ke||r===2*Ve:e instanceof Qe}function Et(e,t,n=!1){if(St(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!St(t))throw new TypeError("getSharedSecret: second arg must be public key");const r=(s=t)instanceof Qe?(s.assertValidity(),s):Qe.fromHex(s);var s;return r.assertValidity(),r.multiply(xt(e)).toRawBytes(n)}Qe.BASE._setWindowSize(8);const At={},Ot={bytesToHex:it,hexToBytes:ft,concatBytes:rt,mod:mt,invert:yt,isValidPrivateKey(e){try{return xt(e),!0}catch(e){return!1}},_bigintTo32Bytes:ut,_normalizePrivateKey:xt,hashToPrivateKey:e=>{e=lt(e);const t=Me+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return ut(mt(dt(e),He.n-ze)+ze)},randomBytes:(e=32)=>Ce.getRandomValues(new Uint8Array(e)),randomPrivateKey:()=>Ot.hashToPrivateKey(Ot.randomBytes(Me+8)),precompute(e=8,t=Qe.BASE){const n=t===Qe.BASE?t:new Qe(t.x,t.y);return n._setWindowSize(e),n.multiply(Be),n},sha256:async(...e)=>{const t=await Ce.subtle.digest("SHA-256",rt(...e));return new Uint8Array(t)},hmacSha256:async(e,...t)=>{const n=await Ce.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=rt(...t),s=await Ce.subtle.sign("HMAC",n,r);return new Uint8Array(s)},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=At[e];if(void 0===n){const t=await Ot.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=rt(t,t),At[e]=n}return Ot.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof wt)throw new Fe("sha256Sync is undefined, you need to set it");let n=At[e];if(void 0===n){const t=wt(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=rt(t,t),At[e]=n}return wt(n,...t)},_JacobianPoint:Je};Object.defineProperties(Ot,{sha256Sync:{configurable:!1,get:()=>wt,set(e){wt||(wt=e)}},hmacSha256Sync:{configurable:!1,get:()=>vt,set(e){vt||(vt=e)}}});const kt=new TextEncoder,Pt=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},{name:"base64",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{name:"base64url",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}];function Tt(e){for(const t of Pt)if(t.name===e)return t.charset;throw TypeError("Charset does not exist: "+e)}const It={encode:function(e,t,n=!1){"string"==typeof e&&(e=kt.encode(e));const r=Tt(t),s=r.length,i=[];let a,o,u,c="",h=0;for(a=0;a<e.length;a++)for(h=0,o=e[a],c+=o>0||(c.length^a)>0?"":"1";h in i||o>0;)u=i[h],u=u>0?256*u+o:o,o=u/s|0,i[h]=u%s,h++;for(;h-- >0;)c+=r[i[h]];return n&&c.length%4>0?c+"=".repeat(4-c.length%4):c},decode:function(e,t){const n=Tt(t),r=n.length,s=[],i=[];e=e.replace("=","");let a,o,u,c=0;for(a=0;a<e.length;a++){if(c=0,o=n.indexOf(e[a]),o<0)throw new Error(`Character range out of bounds: ${o}`);for(o>0||(i.length^a)>0||i.push(0);c in s||o>0;)u=s[c],u=u>0?u*r+o:o,o=u>>8,s[c]=u%256,c++}for(;c-- >0;)i.push(s[c]);return new Uint8Array(i)}},Ut="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Nt=[996825010,642813549,513874426,1027748829,705979059],Ct={BECH32:"bech32",BECH32M:"bech32m"};function Zt(e){switch(e){case Ct.BECH32:return 1;case Ct.BECH32M:return 734539939;default:throw new Error(`Unrecognized encoding: ${e}`)}}function zt(e){let t=1;for(let n=0;n<e.length;++n){const r=t>>25;t=(33554431&t)<<5^e[n];for(let e=0;e<5;++e)(r>>e&1)>0&&(t^=Nt[e])}return t}function jt(e){const t=[];let n;for(n=0;n<e.length;++n)t.push(e.charCodeAt(n)>>5);for(t.push(0),n=0;n<e.length;++n)t.push(31&e.charCodeAt(n));return t}function Bt(e,t,n,r=!0){const s=[];let i=0,a=0;const o=(1<<n)-1,u=(1<<t+n-1)-1;for(const r of e){if(r<0||r>>t>0)return[];for(i=(i<<t|r)&u,a+=t;a>=n;)a-=n,s.push(i>>a&o)}if(r)a>0&&s.push(i<<n-a&o);else if(a>=t||(i<<n-a&o)>0)return[];return s}function Rt(e,t,n){const r=t.concat(function(e,t,n){const r=zt(jt(e).concat(t).concat([0,0,0,0,0,0]))^Zt(n),s=[];for(let e=0;e<6;++e)s.push(r>>5*(5-e)&31);return s}(e,t,n));let s=e+"1";for(let e=0;e<r.length;++e)s+=Ut.charAt(r[e]);return s}function Ht(e,t){const n=t>0?"bech32m":"bech32";if(!function(e){let t,n,r=!1,s=!1;for(t=0;t<e.length;++t){if(n=e.charCodeAt(t),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}(e))return{hrp:null,data:[255]};if(!function(e){const t=e.lastIndexOf("1");return!(t<1||t+7>e.length||e.length>90)}(e=e.toLowerCase()))return{hrp:null,data:[255]};const r=[],s=e.lastIndexOf("1"),i=e.substring(0,s);for(let t=s+1;t<e.length;++t){const n=Ut.indexOf(e.charAt(t));if(-1===n)return{hrp:null,data:[255]};r.push(n)}return function(e,t,n){return zt(jt(e).concat(t))===Zt(n)}(i,r,n)?{hrp:i,data:r.slice(0,r.length-6)}:{hrp:null,data:[255]}}function Lt(e,t=0){const n=e.split("1",1)[0],{hrp:r,data:s}=Ht(e,t),i=Bt(s.slice(1),5,8,!1),a=i.length;switch(!0){case n!==r:throw new Error("Returned hrp string is invalid.");case null===i||a<2||a>40:throw new Error("Decoded string is invalid or out of spec.");case s[0]>16:throw new Error("Returned version bit is out of range.");case 0===s[0]&&20!==a&&32!==a:throw new Error("Decoded string does not match version 0 spec.");case 0===s[0]&&0!==t:case 0!==s[0]&&1!==t:throw new Error("Decoded version bit does not match.");default:return Uint8Array.from(i)}}const Dt={encode:function(e,t="bch",n=0){const r=Rt(t,[n,...Bt([...e],8,5)],n>0?"bech32m":"bech32");return Lt(r,n),r},decode:Lt},$t=new TextEncoder,Mt=new TextDecoder;function Kt(e){return $t.encode(e)}function Vt(e){const t=[];let n,r=0;if(e.length%2>0)throw new Error(`Invalid hex string length: ${e.length}`);for(n=0;n<e.length;n+=2)t[r]=parseInt(e.slice(n,n+2),16),r+=1;return Uint8Array.from(t)}function qt(e){if(0===e)return Uint8Array.of(0);const t=[];for(;e>0;){const n=255&e;t.push(n),e=(e-n)/256}return Uint8Array.from(t)}function Wt(e){if(0n===e)return Uint8Array.of(0);const t=[];for(;e>0n;){const n=0xffn&e;t.push(Number(n)),e=(e-n)/256n}return Uint8Array.from(t)}function Ft(e){return Mt.decode(e)}function Yt(e){let t,n=0;for(t=e.length-1;t>=0;t--)n=256*n+e[t];return Number(n)}function Jt(e){let t,n=0n;for(t=e.length-1;t>=0;t--)n=256n*n+BigInt(e[t]);return BigInt(n)}const Gt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Xt(e,t,n,r,s){let i,a,o,u,c,h,f,d,l,p,m,g,y;for(;s>=64;){for(i=t[0],a=t[1],o=t[2],u=t[3],c=t[4],h=t[5],f=t[6],d=t[7],p=0;p<16;p++)m=r+4*p,e[p]=(255&n[m])<<24|(255&n[m+1])<<16|(255&n[m+2])<<8|255&n[m+3];for(p=16;p<64;p++)l=e[p-2],g=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,l=e[p-15],y=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,e[p]=(g+e[p-7]|0)+(y+e[p-16]|0);for(p=0;p<64;p++)g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&h^~c&f)|0)+(d+(Gt[p]+e[p]|0)|0)|0,y=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&a^i&o^a&o)|0,d=f,f=h,h=c,c=u+g|0,u=o,o=a,a=i,i=g+y|0;t[0]+=i,t[1]+=a,t[2]+=o,t[3]+=u,t[4]+=c,t[5]+=h,t[6]+=f,t[7]+=d,r+=64,s-=64}return r}let Qt=class{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(Xt(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=Xt(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this}finish(e){if(!this.finished){const e=this.bytesHashed,t=this.bufferLength,n=e/536870912|0,r=e<<3,s=e%64<56?64:128;this.buffer[t]=128;for(let e=t+1;e<s-8;e++)this.buffer[e]=0;this.buffer[s-8]=n>>>24&255,this.buffer[s-7]=n>>>16&255,this.buffer[s-6]=n>>>8&255,this.buffer[s-5]=n>>>0&255,this.buffer[s-4]=r>>>24&255,this.buffer[s-3]=r>>>16&255,this.buffer[s-2]=r>>>8&255,this.buffer[s-1]=r>>>0&255,Xt(this.temp,this.state,this.buffer,0,s),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}};class en{constructor(e){this.inner=new Qt,this.outer=new Qt,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;const t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new Qt).update(e).finish(t).clean();else for(let n=0;n<e.length;n++)t[n]=e[n];for(let e=0;e<t.length;e++)t[e]^=54;this.inner.update(t);for(let e=0;e<t.length;e++)t[e]^=106;this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(let e=0;e<t.length;e++)t[e]=0}reset(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this}clean(){for(let e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()}update(e){return this.inner.update(e),this}finish(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}}function tn(e){const t=(new Qt).update(e),n=t.digest();return t.clean(),n}function nn(e){return tn(tn(e))}function rn(e,t){const n=new en(e).update(t),r=n.digest();return n.clean(),r}class sn extends Uint8Array{static{this.num=(e,t,n="le")=>{const r=new sn(qt(e),t);return"le"===n?r.reverse():r}}static{this.big=(e,t,n="le")=>{const r=new sn(Wt(e),t);return"le"===n?r.reverse():r}}static b58check(e){const t=It.decode(e,"base58");return new sn(function(e){const t=e.slice(0,-4),n=e.slice(-4);if(nn(t).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return t}(t))}static{this.any=(e,t)=>new sn(function(e){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;const t=typeof e;switch(t){case"bigint":return Wt(e);case"boolean":return Uint8Array.of(e);case"number":return qt(e);case"string":return null!==e.match(/^(02|03)*[0-9a-fA-F]{64}$/)?Vt(e):$t.encode(e);default:throw TypeError("Unsupported format:"+t)}}(e),t)}static{this.raw=(e,t)=>new sn(e,t)}static{this.str=(e,t)=>new sn(Kt(e),t)}static{this.hex=(e,t)=>new sn(Vt(e),t)}static{this.json=e=>new sn(Kt(JSON.stringify(e)))}static{this.base64=e=>new sn(It.decode(e,"base64"))}static{this.b64url=e=>new sn(It.decode(e,"base64url"))}static{this.bech32=(e,t=0)=>new sn(Dt.decode(e,t))}static{this.bech32m=e=>new sn(Dt.decode(e,1))}constructor(e,t){if(void 0!==t){const n=new Uint8Array(t).fill(0);n.set(new Uint8Array(e)),e=n.buffer}return super(e),this}get num(){return this.toNum()}get big(){return this.toBig()}get arr(){return this.toArr()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toDigest()}get id(){return this.toDigest().hex}toNum(e="le"){return Yt("le"===e?this.reverse():this)}toBig(e="le"){return Jt("le"===e?this.reverse():this)}toDigest(){return new sn(tn(this))}toHmac(e){return"string"==typeof e&&(e=Kt(e)),new sn(rn(e,this))}tob58check(){return It.encode(function(e){const t=nn(e);return Uint8Array.of(...e,...t.slice(0,4))}(this),"base58")}toArr(){return Array.from(this)}toStr(){return Ft(this)}toHex(){return function(e){const t=[];let n;for(n=0;n<e.length;n++)t.push(e[n].toString(16).padStart(2,"0"));return t.join("")}(this)}toJson(){return JSON.parse(Ft(this))}toBytes(){return new Uint8Array(this)}toB64url(){return It.encode(this,"base64url")}toBase64(e){return It.encode(this,"base64",e)}toBech32(e,t=0){return Dt.encode(this,e,t)}toBech32m(e){return Dt.encode(this,e,1)}prepend(e){return sn.of(...e,...this)}append(e){return sn.of(...this,...e)}slice(e,t){return new sn(new Uint8Array(this).slice(e,t))}reverse(){return new sn(new Uint8Array(this).reverse())}write(e,t){this.set(e,t)}prefixSize(e){return sn.of(...sn.readSize(this.length,e),...this)}static from(e){return new sn(Uint8Array.from(e))}static of(...e){return new sn(Uint8Array.of(...e))}static join(e){let t,n=0;const r=e.reduce(((e,t)=>e+t.length),0),s=new Uint8Array(r);for(const r of e)for(t=0;t<r.length;n++,t++)s[n]=r[t];return new sn(s,r)}static readSize(e,t){if(e<253)return sn.num(e,1);if(e<65536)return sn.of(253,...sn.num(e,2,t));if(e<4294967296)return sn.of(254,...sn.num(e,4,t));if(e<0x10000000000000000)return sn.of(255,...sn.num(e,8,t));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new sn(crypto.getRandomValues(new Uint8Array(e)))}static{this.encode=Kt}static{this.decode=Ft}static normalize(e,t){if(e instanceof Uint8Array)return e;if("string"==typeof e)return sn.hex(e,t).raw;if("number"==typeof e)return sn.num(e,t).raw;if("bigint"==typeof e)return sn.big(e,t).raw;throw TypeError("Unrecognized format: "+typeof e)}static serialize(e){if("string"==typeof e)return sn.str(e).raw;if("object"==typeof e){if(e instanceof Uint8Array)return e;try{return sn.json(e).raw}catch{throw TypeError("Object is not serializable.")}}throw TypeError("Unrecognized format: "+typeof e)}static revitalize(e){if(e instanceof Uint8Array&&(e=Ft(e)),"string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}const an=function(){if("undefined"!=typeof globalThis)return globalThis.crypto;if("undefined"!=typeof window)return window.crypto;throw new Error("Must be using https in browser, or node/deno environment that supports globalthis.crypto object!")}();async function on(e,t){return Et(sn.normalize(e),sn.normalize(t),!0)}async function un(e){return an.subtle.importKey("raw",sn.normalize(e),{name:"AES-CBC"},!0,["encrypt","decrypt"])}const cn={ecdh:on,import:un,export:async function(e){return an.subtle.exportKey("raw",e).then((e=>new Uint8Array(e)))},hmac:async function(e,t="SHA-256"){const n={name:"HMAC",hash:t};return an.subtle.importKey("raw",sn.normalize(e),n,!1,["sign","verify"])},shared:async function(e,t){return un((await on(e,t)).slice(1,33))},generate:async function(){return un(sn.random(32))},normalize:async function(e){return e instanceof CryptoKey?e:cn.import(e)}};class hn extends Uint8Array{static{this.N=He.n}static mod(e,t=hn.N){return Ot.mod(e,t)}static normalize(e){return e=dn(e),e=hn.mod(e),hn.validate(e),sn.big(e,32)}static validate(e){return Ot.isValidPrivateKey(e)}constructor(e){super(hn.normalize(e))}get buff(){return new sn(this)}get raw(){return this.buff.raw}get num(){return this.buff.big}get big(){return this.buff.big}get hex(){return this.buff.hex}get point(){return this.generate()}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(e){return new hn(e).num>this.num}lt(e){return new hn(e).num<this.num}eq(e){return new hn(e).num===this.num}ne(e){return new hn(e).num!==this.num}add(e){const t=new hn(e);return new hn(this.num+t.num)}sub(e){const t=new hn(e);return new hn(this.num-t.num)}mul(e){const t=new hn(e);return new hn(this.num*t.num)}pow(e,t=hn.N-1n){const n=new hn(e),r=hn.mod(n.num,t);return new hn(this.num**r)}div(e){const t=new hn(e),n=this.pow(t.num,hn.N-2n);return new hn(this.num*n.num)}negate(){return new hn(hn.N-this.num)}generate(){return fn.import(Qe.BASE.multiply(this.big))}}class fn{static{this.N=He.n}static validate(e){try{return e=new fn(e),!0}catch{return!1}}static normalize(e){return e=function(e){if(e instanceof hn)return e.hex;if(e instanceof fn)return e.hex;if(e instanceof Uint8Array)return sn.raw(e).hex;if("string"==typeof e)return e;if("number"==typeof e)return sn.num(e).hex;if("bigint"==typeof e)return sn.big(e).hex;throw TypeError("Invalid input type:"+typeof e)}(e),Qe.fromHex(e)}static generate(e){return new hn(e).generate()}static import(e){return new fn(e.x,e.y)}constructor(e,t){this.__p="bigint"==typeof e&&"bigint"==typeof t?new Qe(e,t):fn.normalize(e),this.p.assertValidity()}get p(){return this.__p}get x(){return this.p.x}get y(){return this.p.y}get buff(){const e=this.p.toRawBytes(!0);if(e.length<33){const t=this.p.hasEvenY()?2:3;return sn.of(t,...e)}return sn.raw(e)}get buffX(){return new sn((e=this.buff).length>32?e.slice(1,33):e);var e}get raw(){return this.buff.raw}get rawX(){return this.buffX.raw}get rawY(){return sn.big(this.y).raw}get hex(){return this.buff.hex}get hexX(){return this.buffX.hex}get hasEvenY(){return this.p.hasEvenY()}get hasOddY(){return!this.p.hasEvenY()}eq(e){return e instanceof fn?this.p.equals(new Qe(e.x,e.y)):e instanceof Uint8Array?this.x.toString()===e.toString():"number"==typeof e?BigInt(e)===this.x:e===this.x}add(e){return e instanceof fn?fn.import(this.p.add(e.p)):fn.import(this.p.add(fn.generate(e).p))}sub(e){return e instanceof fn?fn.import(this.p.subtract(e.p)):fn.import(this.p.subtract(fn.generate(e).p))}mul(e){return e instanceof fn?fn.import(this.p.multiply(e.x)):fn.import(this.p.multiply(dn(e)))}negate(){return fn.import(this.p.negate())}}function dn(e){if(e instanceof hn)return e.num;if(e instanceof fn)return e.x;if(e instanceof Uint8Array)return sn.raw(e).big;if("string"==typeof e)return sn.hex(e).big;if("number"==typeof e)return sn.num(e).big;if("bigint"==typeof e)return BigInt(e);throw TypeError("Invalid input type:"+typeof e)}function ln(e){let t=0n;for(let n=e.length-1;n>=0;n--)t=256n*t+BigInt(e[n]);return BigInt(t)}function pn(e,t=0){const n=[];for(;e>0;){const t=0xffn&e;n.push(t),e=(e-t)/256n}let r=Uint8Array.from(n.map((e=>Number(e))));if(0!==t){const e=new Uint8Array(t);e.set(r),r=e}return r}const mn=[0n,1n,2n,3n,4n,5n,6n,7n,8n,9n,10n,11n,12n,13n,14n,15n,7n,4n,13n,1n,10n,6n,15n,3n,12n,0n,9n,5n,2n,14n,11n,8n,3n,10n,14n,4n,9n,15n,8n,1n,2n,7n,0n,6n,13n,11n,5n,12n,1n,9n,11n,10n,0n,8n,12n,4n,13n,3n,7n,15n,14n,5n,6n,2n,4n,0n,5n,9n,7n,12n,2n,10n,14n,1n,3n,8n,11n,6n,15n,13n],gn=[5n,14n,7n,0n,9n,2n,11n,4n,13n,6n,15n,8n,1n,10n,3n,12n,6n,11n,3n,7n,0n,13n,5n,10n,14n,15n,8n,12n,4n,9n,1n,2n,15n,5n,1n,3n,7n,14n,6n,9n,11n,8n,12n,2n,10n,0n,4n,13n,8n,6n,4n,1n,3n,11n,15n,0n,5n,12n,2n,13n,9n,7n,10n,14n,12n,15n,10n,4n,1n,5n,8n,7n,6n,2n,13n,14n,0n,3n,9n,11n],yn=[11n,14n,15n,12n,5n,8n,7n,9n,11n,13n,14n,15n,6n,7n,9n,8n,7n,6n,8n,13n,11n,9n,7n,15n,7n,12n,15n,9n,11n,7n,13n,12n,11n,13n,6n,7n,14n,9n,13n,15n,14n,8n,13n,6n,5n,12n,7n,5n,11n,12n,14n,15n,14n,15n,9n,8n,9n,14n,5n,6n,8n,6n,5n,12n,9n,15n,5n,11n,6n,8n,13n,12n,5n,12n,13n,14n,11n,8n,5n,6n],wn=[8n,9n,9n,11n,13n,15n,15n,5n,7n,7n,8n,11n,14n,14n,12n,6n,9n,13n,15n,7n,12n,8n,9n,11n,7n,7n,12n,7n,6n,15n,13n,11n,9n,7n,15n,11n,8n,6n,6n,14n,12n,13n,5n,14n,13n,13n,7n,5n,15n,5n,8n,11n,14n,14n,6n,14n,6n,9n,12n,9n,12n,5n,15n,8n,8n,5n,12n,9n,12n,5n,14n,6n,8n,13n,6n,5n,15n,13n,11n,11n],vn=[0n,0x5a827999n,0x6ed9eba1n,0x8f1bbcdcn,0xa953fd4en],bn=[0x50a28be6n,0x5c4dd124n,0x6d703ef3n,0x7a6d76e9n,0n];function _n(e,t,n,r){switch(!0){case 0n===r:return e^t^n;case 1n===r:return e&t|~e&n;case 2n===r:return(e|~t)^n;case 3n===r:return e&n|t&~n;case 4n===r:return e^(t|~n);default:throw new TypeError("Unknown I value: "+String(r))}}function xn(e,t){return 0xffffffffn&(e<<t|(0xffffffffn&e)>>32n-t)}function Sn(e,t,n,r,s,i){const a=[];let o,u,c,h,f,d,l,p=e,m=t,g=n,y=r,w=s,v=e,b=t,_=n,x=r,S=s;for(let e=0;e<16;e++){const t=ln(i.slice(4*e,4*(e+1)));a.push(t)}for(let e=0;e<80;e++)o=BigInt(e)>>4n,h=a[Number(mn[e])],f=vn[Number(o)],d=a[Number(gn[e])],l=bn[Number(o)],p=xn(p+_n(m,g,y,o)+h+f,yn[e])+w,u=w,w=y,y=xn(g,10n),g=m,m=p,p=u,v=xn(v+_n(b,_,x,4n-o)+d+l,wn[e])+S,c=S,S=x,x=xn(_,10n),_=b,b=v,v=c;return[t+g+x,n+y+S,r+w+v,s+p+b,e+m+_]}async function En(e,t="SHA-256",n=1,r=(e=>e)){let s,i=e instanceof ArrayBuffer?e:sn.normalize(e).buffer;for(s=0;s<n;s++)i=await an.subtle.digest(t,i),r(i);return new Uint8Array(i)}async function An(e){return En(e,"SHA-256")}function On(e){return function(e){let t=[0x67452301n,0xefcdab89n,0x98badcfen,0x10325476n,0xc3d2e1f0n];for(let n=0;n<e.length>>6;n++)t=Sn(...t,e.slice(64*n,64*(n+1)));const n=[128,...new Array(119-e.length&63).fill(0)],r=Uint8Array.from([...e.slice(-64&e.length),...n,...pn(BigInt(8*e.length),8)]);for(let e=0;e<r.length>>6;e++)t=Sn(...t,r.slice(64*e,64*(e+1)));const s=[];for(let e=0;e<t.length;e++){const n=0xffffffffn&t[e];s.push(...pn(n,4))}return Uint8Array.from(s)}(e=sn.normalize(e))}const kn={data:async function(e){return An(sn.serialize(e)).then((e=>new Uint8Array(e)))},digest:En,ripe160:On,sha256:An,sha512:async function(e){return En(e,"SHA-512")},hash160:async function(e){return On(await An(e))},hash256:async function(e){return En(e,"SHA-256",2)},hmac256:async function(e,t){const n=await cn.hmac(e,"SHA-256");return an.subtle.sign("HMAC",n,sn.normalize(t)).then((e=>new Uint8Array(e)))},hmac512:async function(e,t){const n=await cn.hmac(e,"SHA-512");return an.subtle.sign("HMAC",n,sn.normalize(t)).then((e=>new Uint8Array(e)))},sync:{sha256:tn,hash256:nn,hmac256:rn}};function Pn(e,t){const{version:n,input:r,output:s,locktime:i}=e,a=!0!==t&&function(e){for(const t of e){const{witness:e}=t;if("string"==typeof e||e instanceof Uint8Array||Array.isArray(e)&&e.length>0)return!0}return!1}(r),o=[Tn(n)];a&&o.push(se.hex("0001")),o.push(function(e){const t=[se.varInt(e.length)];for(const n of e){const{txid:e,vout:r,scriptSig:s,sequence:i}=n;t.push(In(e)),t.push(Un(r)),t.push(le(s)),t.push(Nn(i))}return se.join(t)}(r)),o.push(function(e){const t=[se.varInt(e.length)];for(const n of e)t.push(Zn(n));return se.join(t)}(s));for(const e of r)a&&void 0!==e?.witness&&o.push(zn(e.witness));return o.push(jn(i)),se.join(o).hex}function Tn(e){return se.num(e,4).reverse()}function In(e){return se.hex(e,32).reverse()}function Un(e){return se.num(e,4).reverse()}function Nn(e=4294967295){return("string"==typeof e?se.hex(e,4):se.num(e,4)).reverse()}function Cn(e){return"number"==typeof e&&(e=BigInt(e)),se.big(e,8).reverse()}function Zn(e){const t=[],{address:n,value:r,scriptPubKey:s}=e;if(t.push(Cn(r)),"string"==typeof n){const e=Ne.convert(n);t.push(le(e))}else t.push(le(s));return se.join(t)}function zn(e){const t=[];if(Array.isArray(e)){t.push(se.varInt(e.length));for(const n of e)t.push(le(n));return se.join(t)}return se.normalize(e)}function jn(e){return se.num(e,4).reverse()}const Bn=[1,2,3,129,130,131];const Rn=192;function Hn(e){const t=se.str(e).digest;return se.join([t,t])}function Ln(e,t=Rn){return se.join([Hn("TapLeaf"),Kn(t),se.normalize(e)]).digest.hex}function Dn(e,t){return t<e&&([e,t]=[t,e]),se.join([Hn("TapBranch"),se.hex(e).raw,se.hex(t).raw]).digest.hex}function $n(e){return se.hex(Mn(e)[0])}function Mn(e,t=null,n=[]){const r=[],s=[];for(let s=0;s<e.length;s++){const i=e[s];if(Array.isArray(i)){const[e,s,a]=Mn(i,t);t=s,r.push(e);for(const e of a)n.push(e)}else r.push(i)}if(1===r.length)return[r[0],t,n];r.sort(),r.length%2!=0&&r.push(r[r.length-1]);for(let e=0;e<r.length-1;e+=2){const i=Dn(r[e],r[e+1]);s.push(i),"string"==typeof t&&(t===r[e]?(n.push(r[e+1]),t=i):t===r[e+1]&&(n.push(r[e]),t=i))}return Mn(s,t,n)}function Kn(e=192){return 254&e}function Vn(e,t){let n=new hn(e);return n.point.hasOddY&&(n=n.negate()),n.add(t).raw}function qn(e,t){return new fn(e).add(t).raw}function Wn(e,t){return se.join([Hn("TapTweak"),se.normalize(e),se.normalize(t)]).digest}function Fn(e,t=[],n=!1){const r=se.normalize(e),s=t.length>0?$n(t):new Uint8Array,i=Wn(n?new hn(r).point.rawX:r,s);if(n)return[se.raw(Vn(r,i)).hex,0];{const e=se.raw(qn(r,i));return[e.slice(1).hex,e.slice(0,1).num]}}const Yn=192;function Jn(e,t,n){const r=new ie(se.normalize(t)),[s,i]=(a=r.read(1).num)%2==0?[a,2]:[a-1,3];var a;const o=r.read(32),u=se.join([i,se.normalize(e)]),c=[];let h=n;for(;r.size>=32;)c.push(r.read(32).hex);if(0!==r.size)throw new Error("Invalid control block size!");for(const e of c)h=Dn(h,e);const f=qn(o,Wn(o,se.hex(h)));return se.raw(f).hex===se.raw(u).hex}function Gn(e,t){if(t)throw new Error(e);return!1}function Xn(e,...t){const n=se.str(e).digest.raw,r=t.map((e=>se.normalize(e)));return se.join([n,n,se.join(r)]).digest}const Qn=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,er=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n;function tr(e){"string"==typeof e&&(e=se.hex(e).raw);const t=new ie(e),n=function(e){return e.read(4).reverse().toNum()}(t),r=function(e){const[t,n]=[...e.peek(2)];if(0===t){if(e.read(2),1===n)return!0;throw new Error(`Invalid witness flag: ${n}`)}return!1}(t),s=function(e){const t=[],n=e.readSize();for(let r=0;r<n;r++)t.push(nr(e));return t}(t),i=function(e){const t=[],n=e.readSize();for(let r=0;r<n;r++)t.push(rr(e));return t}(t);if(r)for(const e of s)e.witness=sr(t);const a=function(e){return e.read(4).reverse().toNum()}(t);return{version:n,input:s,output:i,locktime:a}}function nr(e){return{txid:e.read(32).reverse().toHex(),vout:e.read(4).reverse().toNum(),scriptSig:ar(e,!0),sequence:e.read(4).reverse().toHex()}}function rr(e){return{value:e.read(8).reverse().big,scriptPubKey:ar(e,!0)}}function sr(e){const t=[],n=e.readSize();for(let r=0;r<n;r++){const n=ir(e,!0);t.push(n)}return t}function ir(e,t){const n=!0===t?e.readSize():e.size;return n>0?e.read(n).toHex():se.num(0).toHex()}function ar(e,t){const n=ir(e,t);return"00"!==n?n:[]}const or=[0,1,2,3,129,130,131];function ur(e,t,n={}){("string"==typeof e||e instanceof Uint8Array)&&(e=tr(e));const{extension:r,sigflag:s=0,extflag:i=0,key_version:a=0,separator_pos:o=4294967295}=n,{version:u,input:c=[],output:h=[],locktime:f}=e;if(t>=c.length)throw new Error("Index out of bounds: "+String(t));if(!or.includes(s))throw new Error("Invalid hash type: "+String(s));if(i<0||i>127)throw new Error("Extention flag out of range: "+String(i));const{txid:d,vout:l,sequence:p,witness:m=[]}=c[t],g=128==(128&s),y=function(e){if(void 0===e)return;if(e.length<2)return;let t=e.at(-1);"string"==typeof t&&(t=se.hex(t));if(t instanceof Uint8Array&&80===t[0])return se.raw(t).prefixSize("be").digest;return}(m),w=2*(i+(void 0!==r?1:0))+(void 0!==y?1:0),v=se.str("TapSighash").digest,b=[v,v,se.num(0,1),se.num(s,1),Tn(u),jn(f)];if(!g){const e=c.map((e=>cr(e)));b.push(function(e){const t=[];for(const{txid:n,vout:r}of e)t.push(In(n)),t.push(Un(r));return se.join(t).digest}(c),function(e){const t=[];for(const{value:n}of e)t.push(Cn(n));return se.join(t).digest}(e),function(e){const t=[];for(const{address:n,scriptPubKey:r}of e)if("string"==typeof n){const e=Ne.convert(n);t.push(le(e))}else t.push(le(r));return se.join(t).digest}(e),function(e){const t=[];for(const{sequence:n}of e)t.push(Nn(n));return se.join(t).digest}(c))}if(((3&s)<2||(3&s)>3)&&b.push(function(e){const t=[];for(const{value:n,scriptPubKey:r}of e)t.push(Cn(n)),t.push(le(r));return se.join(t).digest}(h)),b.push(se.num(w,1)),g){const{value:e,scriptPubKey:n}=cr(c[t]);b.push(In(d),Un(l),Cn(e),le(n),Nn(p))}else b.push(se.num(t,4).reverse());return void 0!==y&&b.push(y),3==(3&s)&&b.push(function(e){return se.join([Cn(e.value),le(e.scriptPubKey)]).digest}(h[t])),void 0!==r&&b.push(se.normalize(r),se.num(a),se.num(o,4)),se.join(b).digest}function cr(e){if(void 0===e.prevout)throw new Error("Prevout data missing for input: "+String(e.txid));return e.prevout}const hr={segwit:{hash:async function(e,t,n,r,s){if(!Bn.includes(s))throw new Error("Invalid hash type: "+String(s));const{version:i,input:a,output:o,locktime:u}=e,{txid:c,vout:h,sequence:f}=a[t],d=s>128,l=[Tn(i)];return l.push(await async function(e,t){if(!0===t)return se.num(0,32);const n=[];for(const{txid:t,vout:r}of e)n.push(In(t)),n.push(Un(r));return kn.hash256(se.join(n))}(a,d),await async function(e,t){if(1!==t)return se.num(0,32);const n=[];for(const{sequence:t}of e)n.push(Nn(t));return kn.hash256(se.join(n))}(a,s),In(c),Un(h),le(r,!0),Cn(n),Nn(f),await async function(e,t,n){const r=[];if(1===n){for(const{value:t,scriptPubKey:n}of e)r.push(Cn(t)),r.push(le(n));return kn.hash256(se.join(r))}if(3===n&&t<e.length){const{value:n,scriptPubKey:s}=e[t];return r.push(Cn(n)),r.push(le(s)),kn.hash256(se.join(r))}return se.num(0,32)}(o,t,s),jn(u),se.num(s,4).reverse()),kn.hash256(se.join(l))}},taproot:{hash:ur,sign:function(e,t,n,r={}){const{sigflag:s=0}=r,i=function(e,t,n=se.random(32)){const r=se.normalize(t),s=new hn(e),i=s.point,a=i.hasEvenY?s.big:s.negated.big,o=Xn("BIP0340/aux",se.normalize(n)),u=Xn("BIP0340/nonce",a^o.big,i.rawX,r),c=new hn(u),h=c.point,f=h.hasEvenY?c.big:c.negated.big,d=new hn(Xn("BIP0340/challenge",h.rawX,i.rawX,r)),l=new hn(f+d.big*a);return se.join([h.rawX,l.raw])}(e,ur(t,n,r));return 0===s?se.raw(i).hex:se.join([i,s]).hex},verify:async function(e,t,n={},r=!1){const s=function(e){return("string"==typeof e||e instanceof Uint8Array)&&(e=tr(e)),{...e}}(e),{witness:i}=s.input[t];if(!Array.isArray(i)||i.length<1)return Gn("Invalid witness data: "+String(i),r);if(80===we(i[i.length-1])[0]&&i.pop(),i.length<1)return Gn("Invalid witness data: "+String(i),r);const a=new ie(we(i[0])),o=a.read(64).raw,u=s.input[t].prevout,c=we(u?.scriptPubKey).slice(2);let h,f;if(1===a.size&&(n.sigflag=a.read(1).num,0===n.sigflag))return Gn("0x00 is not a valid appended sigflag!",r);if(i.length>1&&(f=we(i.pop())),i.length>1&&f instanceof Uint8Array){const e=le(i.pop()),t=254&f[0];h=await Ln(e,t),n.extension=h}return function(e,t,n,r=!1){const s=new fn(n),i=se.normalize(t),a=se.bytes(e).stream;a.size<64&&Gn("Signature length is too small: "+String(a.size),r);const o=a.read(32);o.big>Qn&&Gn("Signature r value greater than field size!",r);const u=a.read(32);u.big>er&&Gn("Signature s value greater than curve order!",r);const c=new hn(Xn("BIP0340/challenge",o.raw,s.rawX,i)),h=new hn(u).point,f=s.mul(c.big),d=h.sub(f);return d.hasOddY&&Gn("Signature R value has odd Y coordinate!",r),0n===d.x&&Gn("Signature R value is infinite!",r),d.x===o.big}(o,ur(s,t,n),c,!0)?!(void 0!==f&&void 0!==h&&!await Jn(c,f,h))||Gn("Invalid cblock!",r):Gn("Invalid signature!",r)}}},fr={getTag:Hn,getLeaf:Ln,getBranch:Dn,getRoot:$n,getPath:function e(t,n,r=[n],s=Yn,i=0){const[a,o]=function(e){let t;e=se.normalize(e),e.length>32&&(t=e[0],e=e.slice(1,33));return[e,t]}(t);i=void 0!==o?o:i;const u=[se.num(s+function(e=2){if(0===e||1===e)return e;if(2===e||"02"===e)return 0;if(3===e||"03"===e)return 1;throw new Error("Invalid parity bit:"+String(e))}(i)),a],[c,h,f]=Mn(r,n);r.length>1&&f.forEach((e=>u.push(se.hex(e))));const d=se.join(u);if(!Jn(qn(a,Wn(a,se.hex(c))).slice(1),d,n)){if(0===i)return e(t,n,r,s,1);throw new Error("Path checking failed! Unable to generate path.")}return d.hex},checkPath:Jn},dr={getPubkey:function(e,t=[]){return Fn(e,t)},getSeckey:function(e,t=[]){return Fn(e,t,!0)[0]},getTweak:Wn,tweakSeckey:Vn,tweakPubkey:qn},lr={encode:Pn,decode:tr,getTxid:function(e){let t;if(e instanceof Uint8Array)t=e;else if("string"==typeof e)t=se.hex(e);else{if("object"!=typeof e)throw new Error("Unrecognized format:"+String(e));t=se.hex(Pn(e))}return se.raw(t).toHash("hash256").reverse().hex}};class pr{constructor(e,t="p2w"){this._buff=se.raw(le(e)),this.format=t}get raw(){return this._buff.raw}get hex(){return this._buff.hex}get asm(){return ye(this._buff,"asm")}get hash(){switch(this.format){case"p2w":return this._buff.toHash("hash256").hex;case"p2sh":return this._buff.toHash("hash160").hex;default:throw new Error("Unrecognized format: "+this.format)}}get isEmpty(){return this.raw.length<1}toJSON(){return this.asm??[]}}const mr=4294967295,gr=512;class yr{constructor(e){this.value="string"==typeof e?parseInt(e,16):e}get isReplaceable(){return this.value<mr}get isLocked(){return!(this.value!==mr||0!=(-2147483648&this.value))}get isTimelock(){return 0!=(4194304&this.value)}get timestamp(){return this.isLocked?this.isTimelock?this.value*gr:this.value*gr*600:0}set timestamp(e){this.value=Math.ceil(e/gr)}get blockheight(){return this.isLocked?this.isTimelock?Math.ceil(this.value*gr/600):this.value:0}set blockheight(e){this.value=e}get estDate(){return this.isTimelock?new Date(Date.now()+this.value*gr*1e3):new Date(Date.now()+600*this.value*1e3)}set estDate(e){const t=e.getTime()-Date.now();this.value=t>512e3?Math.ceil(t/1e3/gr):1}toJSON(){return this.value}}let wr=class{constructor(e){const{address:t,value:n=0,scriptPubKey:r=[]}=e,s="string"==typeof t?Ne.convert(t):r;this.value=BigInt(n),this.scriptPubKey=new pr(s)}};class vr{constructor(e){this.args=e.length>2?e.slice(0,-1):e,this.script=e.length>2?new pr(this.args.pop()??""):new pr([])}get data(){return this.script instanceof pr?[...this.args,this.script.hex]:this.args}toJSON(){return this.data}}let br=class{constructor(e){const{scriptSig:t=[],sequence:n=4294967293,witness:r=[]}=e;this.txid=e.txid,this.vout=e.vout,this.scriptSig=new pr(t),this.sequence=new yr(n),this.witness=new vr(r),void 0!==e.prevout&&(this.prevout=new wr(e.prevout))}};class _r{constructor(e){this.value=e??0}get isTimelock(){return this.value>5e8}get timestamp(){return this.isTimelock?this.value:600*this.value}set timestamp(e){this.value=e}get blockheight(){return this.isTimelock?Math.floor(this.value/600):this.value}set blockheight(e){this.value=e}get estDate(){return this.isTimelock?new Date(Date.now()+1e3*this.value):new Date(Date.now()+600*this.value*1e3)}set estDate(e){this.value=Math.floor((e.getTime()-Date.now())/1e3)}toJSON(){return this.value}}var xr;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(xr||(xr={}));const Sr=xr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Er=e=>{switch(typeof e){case"undefined":return Sr.undefined;case"string":return Sr.string;case"number":return isNaN(e)?Sr.nan:Sr.number;case"boolean":return Sr.boolean;case"function":return Sr.function;case"bigint":return Sr.bigint;case"symbol":return Sr.symbol;case"object":return Array.isArray(e)?Sr.array:null===e?Sr.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Sr.promise:"undefined"!=typeof Map&&e instanceof Map?Sr.map:"undefined"!=typeof Set&&e instanceof Set?Sr.set:"undefined"!=typeof Date&&e instanceof Date?Sr.date:Sr.object;default:return Sr.unknown}},Ar=xr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Or extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)n._errors.push(t(s));else{let e=n,r=0;for(;r<s.path.length;){const n=s.path[r];r===s.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(s))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,xr.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Or.create=e=>new Or(e);const kr=(e,t)=>{let n;switch(e.code){case Ar.invalid_type:n=e.received===Sr.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Ar.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,xr.jsonStringifyReplacer)}`;break;case Ar.unrecognized_keys:n=`Unrecognized key(s) in object: ${xr.joinValues(e.keys,", ")}`;break;case Ar.invalid_union:n="Invalid input";break;case Ar.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${xr.joinValues(e.options)}`;break;case Ar.invalid_enum_value:n=`Invalid enum value. Expected ${xr.joinValues(e.options)}, received '${e.received}'`;break;case Ar.invalid_arguments:n="Invalid function arguments";break;case Ar.invalid_return_type:n="Invalid function return type";break;case Ar.invalid_date:n="Invalid date";break;case Ar.invalid_string:"object"==typeof e.validation?"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:xr.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Ar.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(e.minimum)}`:"Invalid input";break;case Ar.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(e.maximum)}`:"Invalid input";break;case Ar.custom:n="Invalid input";break;case Ar.invalid_intersection_types:n="Intersection results could not be merged";break;case Ar.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ar.not_finite:n="Number must be finite";break;default:n=t.defaultError,xr.assertNever(e)}return{message:n}};let Pr=kr;function Tr(){return Pr}const Ir=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],a={...s,path:i};let o="";const u=r.filter((e=>!!e)).slice().reverse();for(const e of u)o=e(a,{data:t,defaultError:o}).message;return{...s,path:i,message:s.message||o}};function Ur(e,t){const n=Ir({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Tr(),kr].filter((e=>!!e))});e.common.issues.push(n)}class Nr{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return Cr;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return Nr.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:s}=r;if("aborted"===t.status)return Cr;if("aborted"===s.status)return Cr;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),(void 0!==s.value||r.alwaysSet)&&(n[t.value]=s.value)}return{status:e.value,value:n}}}const Cr=Object.freeze({status:"aborted"}),Zr=e=>({status:"dirty",value:e}),zr=e=>({status:"valid",value:e}),jr=e=>"aborted"===e.status,Br=e=>"dirty"===e.status,Rr=e=>"valid"===e.status,Hr=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Lr;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Lr||(Lr={}));class Dr{constructor(e,t,n,r){this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._path.concat(this._key)}}const $r=(e,t)=>{if(Rr(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new Or(e.common.issues)}};function Mr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:s};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:s}}class Kr{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Er(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Er(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Nr,ctx:{common:e.parent.common,data:e.data,parsedType:Er(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Hr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Er(e)},s=this._parseSync({data:e,path:r.path,parent:r});return $r(r,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Er(e)},r=this._parse({data:e,path:n.path,parent:n}),s=await(Hr(r)?r:Promise.resolve(r));return $r(n,s)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const s=e(t),i=()=>r.addIssue({code:Ar.custom,...n(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then((e=>!!e||(i(),!1))):!!s||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new Ps({schema:this,typeName:Hs.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ts.create(this,this._def)}nullable(){return Is.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return us.create(this,this._def)}promise(){return ks.create(this,this._def)}or(e){return ds.create([this,e],this._def)}and(e){return gs.create(this,e,this._def)}transform(e){return new Ps({...Mr(this._def),schema:this,typeName:Hs.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Us({...Mr(this._def),innerType:this,defaultValue:t,typeName:Hs.ZodDefault})}brand(){return new zs({typeName:Hs.ZodBranded,type:this,...Mr(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ns({...Mr(this._def),innerType:this,catchValue:t,typeName:Hs.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return js.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Vr=/^c[^\s-]{8,}$/i,qr=/^[a-z][a-z0-9]*$/,Wr=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Fr=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|([^-]([a-zA-Z0-9-]*\.)+[a-zA-Z]{2,}))$/;class Yr extends Kr{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement((t=>e.test(t)),{validation:t,code:Ar.invalid_string,...Lr.errToObj(n)}),this.nonempty=e=>this.min(1,Lr.errToObj(e)),this.trim=()=>new Yr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Sr.string){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.string,received:t.parsedType}),Cr}const t=new Nr;let n;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const r=e.data.length>s.value,i=e.data.length<s.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?Ur(n,{code:Ar.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&Ur(n,{code:Ar.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)Fr.test(e.data)||(n=this._getOrReturnCtx(e,n),Ur(n,{validation:"email",code:Ar.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)Wr.test(e.data)||(n=this._getOrReturnCtx(e,n),Ur(n,{validation:"uuid",code:Ar.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)Vr.test(e.data)||(n=this._getOrReturnCtx(e,n),Ur(n,{validation:"cuid",code:Ar.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)qr.test(e.data)||(n=this._getOrReturnCtx(e,n),Ur(n,{validation:"cuid2",code:Ar.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),Ur(n,{validation:"url",code:Ar.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Ur(n,{validation:"regex",code:Ar.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){((r=s).precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):0===r.precision?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else xr.assertNever(s);var r;return{status:t.value,value:e.data}}_addCheck(e){return new Yr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Lr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Lr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Lr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Lr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Lr.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...Lr.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Lr.errToObj(t)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Lr.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Lr.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Lr.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Lr.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Lr.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Jr(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}Yr.create=e=>{var t;return new Yr({checks:[],typeName:Hs.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Mr(e)})};class Gr extends Kr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Sr.number){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.number,received:t.parsedType}),Cr}let t;const n=new Nr;for(const r of this._def.checks)if("int"===r.kind)xr.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Ur(t,{code:Ar.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Ur(t,{code:Ar.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Ur(t,{code:Ar.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Jr(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),Ur(t,{code:Ar.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Ur(t,{code:Ar.not_finite,message:r.message}),n.dirty()):xr.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Lr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Lr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Lr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Lr.toString(t))}setLimit(e,t,n,r){return new Gr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Lr.toString(r)}]})}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Lr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Lr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Lr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Lr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Lr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Lr.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Lr.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&xr.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Gr.create=e=>new Gr({checks:[],typeName:Hs.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Mr(e)});class Xr extends Kr{_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==Sr.bigint){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.bigint,received:t.parsedType}),Cr}return zr(e.data)}}Xr.create=e=>{var t;return new Xr({typeName:Hs.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Mr(e)})};class Qr extends Kr{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Sr.boolean){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.boolean,received:t.parsedType}),Cr}return zr(e.data)}}Qr.create=e=>new Qr({typeName:Hs.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Mr(e)});class es extends Kr{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Sr.date){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.date,received:t.parsedType}),Cr}if(isNaN(e.data.getTime())){return Ur(this._getOrReturnCtx(e),{code:Ar.invalid_date}),Cr}const t=new Nr;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),Ur(n,{code:Ar.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):xr.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new es({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Lr.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Lr.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}es.create=e=>new es({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Hs.ZodDate,...Mr(e)});class ts extends Kr{_parse(e){if(this._getType(e)!==Sr.symbol){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.symbol,received:t.parsedType}),Cr}return zr(e.data)}}ts.create=e=>new ts({typeName:Hs.ZodSymbol,...Mr(e)});class ns extends Kr{_parse(e){if(this._getType(e)!==Sr.undefined){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.undefined,received:t.parsedType}),Cr}return zr(e.data)}}ns.create=e=>new ns({typeName:Hs.ZodUndefined,...Mr(e)});class rs extends Kr{_parse(e){if(this._getType(e)!==Sr.null){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.null,received:t.parsedType}),Cr}return zr(e.data)}}rs.create=e=>new rs({typeName:Hs.ZodNull,...Mr(e)});class ss extends Kr{constructor(){super(...arguments),this._any=!0}_parse(e){return zr(e.data)}}ss.create=e=>new ss({typeName:Hs.ZodAny,...Mr(e)});class is extends Kr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zr(e.data)}}is.create=e=>new is({typeName:Hs.ZodUnknown,...Mr(e)});class as extends Kr{_parse(e){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.never,received:t.parsedType}),Cr}}as.create=e=>new as({typeName:Hs.ZodNever,...Mr(e)});class os extends Kr{_parse(e){if(this._getType(e)!==Sr.undefined){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.void,received:t.parsedType}),Cr}return zr(e.data)}}os.create=e=>new os({typeName:Hs.ZodVoid,...Mr(e)});class us extends Kr{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==Sr.array)return Ur(t,{code:Ar.invalid_type,expected:Sr.array,received:t.parsedType}),Cr;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,s=t.data.length<r.exactLength.value;(e||s)&&(Ur(t,{code:e?Ar.too_big:Ar.too_small,minimum:s?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Ur(t,{code:Ar.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Ur(t,{code:Ar.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Dr(t,e,t.path,n))))).then((e=>Nr.mergeArray(n,e)));const s=[...t.data].map(((e,n)=>r.type._parseSync(new Dr(t,e,t.path,n))));return Nr.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new us({...this._def,minLength:{value:e,message:Lr.toString(t)}})}max(e,t){return new us({...this._def,maxLength:{value:e,message:Lr.toString(t)}})}length(e,t){return new us({...this._def,exactLength:{value:e,message:Lr.toString(t)}})}nonempty(e){return this.min(1,e)}}var cs;function hs(e){if(e instanceof fs){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ts.create(hs(r))}return new fs({...e._def,shape:()=>t})}return e instanceof us?us.create(hs(e.element)):e instanceof Ts?Ts.create(hs(e.unwrap())):e instanceof Is?Is.create(hs(e.unwrap())):e instanceof ys?ys.create(e.items.map((e=>hs(e)))):e}us.create=(e,t)=>new us({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Hs.ZodArray,...Mr(t)}),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(cs||(cs={}));class fs extends Kr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=xr.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Sr.object){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.object,received:t.parsedType}),Cr}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof as&&"strip"===this._def.unknownKeys))for(const e in n.data)s.includes(e)||i.push(e);const a=[];for(const e of s){const t=r[e],s=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new Dr(n,s,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof as){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(Ur(n,{code:Ar.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new Dr(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>Nr.mergeObjectSync(t,e))):Nr.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return new fs({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,s,i,a;const o=null!==(i=null===(s=(r=this._def).errorMap)||void 0===s?void 0:s.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=Lr.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new fs({...this._def,unknownKeys:"strip"})}passthrough(){return new fs({...this._def,unknownKeys:"passthrough"})}extend(e){return new fs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>cs.mergeShapes(this._def.shape(),e._def.shape()),typeName:Hs.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new fs({...this._def,catchall:e})}pick(e){const t={};return xr.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new fs({...this._def,shape:()=>t})}omit(e){const t={};return xr.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new fs({...this._def,shape:()=>t})}deepPartial(){return hs(this)}partial(e){const t={};return xr.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new fs({...this._def,shape:()=>t})}required(e){const t={};return xr.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Ts;)e=e._def.innerType;t[n]=e}})),new fs({...this._def,shape:()=>t})}keyof(){return Es(xr.objectKeys(this.shape))}}fs.create=(e,t)=>new fs({shape:()=>e,unknownKeys:"strip",catchall:as.create(),typeName:Hs.ZodObject,...Mr(t)}),fs.strictCreate=(e,t)=>new fs({shape:()=>e,unknownKeys:"strict",catchall:as.create(),typeName:Hs.ZodObject,...Mr(t)}),fs.lazycreate=(e,t)=>new fs({shape:e,unknownKeys:"strip",catchall:as.create(),typeName:Hs.ZodObject,...Mr(t)});class ds extends Kr{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new Or(e.ctx.common.issues)));return Ur(t,{code:Ar.invalid_union,unionErrors:n}),Cr}));{let e;const r=[];for(const s of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=r.map((e=>new Or(e)));return Ur(t,{code:Ar.invalid_union,unionErrors:s}),Cr}}get options(){return this._def.options}}ds.create=(e,t)=>new ds({options:e,typeName:Hs.ZodUnion,...Mr(t)});const ls=e=>e instanceof xs?ls(e.schema):e instanceof Ps?ls(e.innerType()):e instanceof Ss?[e.value]:e instanceof As?e.options:e instanceof Os?Object.keys(e.enum):e instanceof Us?ls(e._def.innerType):e instanceof ns?[void 0]:e instanceof rs?[null]:null;class ps extends Kr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Sr.object)return Ur(t,{code:Ar.invalid_type,expected:Sr.object,received:t.parsedType}),Cr;const n=this.discriminator,r=t.data[n],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Ur(t,{code:Ar.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Cr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=ls(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const s of t){if(r.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);r.set(s,n)}}return new ps({typeName:Hs.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Mr(n)})}}function ms(e,t){const n=Er(e),r=Er(t);if(e===t)return{valid:!0,data:e};if(n===Sr.object&&r===Sr.object){const n=xr.objectKeys(t),r=xr.objectKeys(e).filter((e=>-1!==n.indexOf(e))),s={...e,...t};for(const n of r){const r=ms(e[n],t[n]);if(!r.valid)return{valid:!1};s[n]=r.data}return{valid:!0,data:s}}if(n===Sr.array&&r===Sr.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const s=ms(e[r],t[r]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===Sr.date&&r===Sr.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class gs extends Kr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(jr(e)||jr(r))return Cr;const s=ms(e.value,r.value);return s.valid?((Br(e)||Br(r))&&t.dirty(),{status:t.value,value:s.data}):(Ur(n,{code:Ar.invalid_intersection_types}),Cr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}gs.create=(e,t,n)=>new gs({left:e,right:t,typeName:Hs.ZodIntersection,...Mr(n)});class ys extends Kr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.array)return Ur(n,{code:Ar.invalid_type,expected:Sr.array,received:n.parsedType}),Cr;if(n.data.length<this._def.items.length)return Ur(n,{code:Ar.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Cr;!this._def.rest&&n.data.length>this._def.items.length&&(Ur(n,{code:Ar.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Dr(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>Nr.mergeArray(t,e))):Nr.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ys({...this._def,rest:e})}}ys.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ys({items:e,typeName:Hs.ZodTuple,rest:null,...Mr(t)})};class ws extends Kr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.object)return Ur(n,{code:Ar.invalid_type,expected:Sr.object,received:n.parsedType}),Cr;const r=[],s=this._def.keyType,i=this._def.valueType;for(const e in n.data)r.push({key:s._parse(new Dr(n,e,n.path,e)),value:i._parse(new Dr(n,n.data[e],n.path,e))});return n.common.async?Nr.mergeObjectAsync(t,r):Nr.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ws(t instanceof Kr?{keyType:e,valueType:t,typeName:Hs.ZodRecord,...Mr(n)}:{keyType:Yr.create(),valueType:e,typeName:Hs.ZodRecord,...Mr(t)})}}class vs extends Kr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.map)return Ur(n,{code:Ar.invalid_type,expected:Sr.map,received:n.parsedType}),Cr;const r=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new Dr(n,e,n.path,[i,"key"])),value:s._parse(new Dr(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,s=await n.value;if("aborted"===r.status||"aborted"===s.status)return Cr;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,s=n.value;if("aborted"===r.status||"aborted"===s.status)return Cr;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}}}vs.create=(e,t,n)=>new vs({valueType:t,keyType:e,typeName:Hs.ZodMap,...Mr(n)});class bs extends Kr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.set)return Ur(n,{code:Ar.invalid_type,expected:Sr.set,received:n.parsedType}),Cr;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Ur(n,{code:Ar.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Ur(n,{code:Ar.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return Cr;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>s._parse(new Dr(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new bs({...this._def,minSize:{value:e,message:Lr.toString(t)}})}max(e,t){return new bs({...this._def,maxSize:{value:e,message:Lr.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}bs.create=(e,t)=>new bs({valueType:e,minSize:null,maxSize:null,typeName:Hs.ZodSet,...Mr(t)});class _s extends Kr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Sr.function)return Ur(t,{code:Ar.invalid_type,expected:Sr.function,received:t.parsedType}),Cr;function n(e,n){return Ir({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tr(),kr].filter((e=>!!e)),issueData:{code:Ar.invalid_arguments,argumentsError:n}})}function r(e,n){return Ir({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tr(),kr].filter((e=>!!e)),issueData:{code:Ar.invalid_return_type,returnTypeError:n}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof ks?zr((async(...e)=>{const t=new Or([]),a=await this._def.args.parseAsync(e,s).catch((r=>{throw t.addIssue(n(e,r)),t})),o=await i(...a);return await this._def.returns._def.type.parseAsync(o,s).catch((e=>{throw t.addIssue(r(o,e)),t}))})):zr(((...e)=>{const t=this._def.args.safeParse(e,s);if(!t.success)throw new Or([n(e,t.error)]);const a=i(...t.data),o=this._def.returns.safeParse(a,s);if(!o.success)throw new Or([r(a,o.error)]);return o.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _s({...this._def,args:ys.create(e).rest(is.create())})}returns(e){return new _s({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _s({args:e||ys.create([]).rest(is.create()),returns:t||is.create(),typeName:Hs.ZodFunction,...Mr(n)})}}class xs extends Kr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}xs.create=(e,t)=>new xs({getter:e,typeName:Hs.ZodLazy,...Mr(t)});class Ss extends Kr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ur(t,{received:t.data,code:Ar.invalid_literal,expected:this._def.value}),Cr}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Es(e,t){return new As({values:e,typeName:Hs.ZodEnum,...Mr(t)})}Ss.create=(e,t)=>new Ss({value:e,typeName:Hs.ZodLiteral,...Mr(t)});class As extends Kr{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return Ur(t,{expected:xr.joinValues(n),received:t.parsedType,code:Ar.invalid_type}),Cr}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Ur(t,{received:t.data,code:Ar.invalid_enum_value,options:n}),Cr}return zr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return As.create(e)}exclude(e){return As.create(this.options.filter((t=>!e.includes(t))))}}As.create=Es;class Os extends Kr{_parse(e){const t=xr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Sr.string&&n.parsedType!==Sr.number){const e=xr.objectValues(t);return Ur(n,{expected:xr.joinValues(e),received:n.parsedType,code:Ar.invalid_type}),Cr}if(-1===t.indexOf(e.data)){const e=xr.objectValues(t);return Ur(n,{received:n.data,code:Ar.invalid_enum_value,options:e}),Cr}return zr(e.data)}get enum(){return this._def.values}}Os.create=(e,t)=>new Os({values:e,typeName:Hs.ZodNativeEnum,...Mr(t)});class ks extends Kr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Sr.promise&&!1===t.common.async)return Ur(t,{code:Ar.invalid_type,expected:Sr.promise,received:t.parsedType}),Cr;const n=t.parsedType===Sr.promise?t.data:Promise.resolve(t.data);return zr(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ks.create=(e,t)=>new ks({type:e,typeName:Hs.ZodPromise,...Mr(t)});class Ps extends Kr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Hs.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null;if("preprocess"===r.type){const e=r.transform(n.data);return n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}const s={addIssue:e=>{Ur(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"refinement"===r.type){const e=e=>{const t=r.refinement(e,s);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?Cr:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?Cr:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Rr(e))return e;const i=r.transform(e.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Rr(e)?Promise.resolve(r.transform(e.value,s)).then((e=>({status:t.value,value:e}))):e))}xr.assertNever(r)}}Ps.create=(e,t,n)=>new Ps({schema:e,typeName:Hs.ZodEffects,effect:t,...Mr(n)}),Ps.createWithPreprocess=(e,t,n)=>new Ps({schema:t,effect:{type:"preprocess",transform:e},typeName:Hs.ZodEffects,...Mr(n)});class Ts extends Kr{_parse(e){return this._getType(e)===Sr.undefined?zr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ts.create=(e,t)=>new Ts({innerType:e,typeName:Hs.ZodOptional,...Mr(t)});class Is extends Kr{_parse(e){return this._getType(e)===Sr.null?zr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Is.create=(e,t)=>new Is({innerType:e,typeName:Hs.ZodNullable,...Mr(t)});class Us extends Kr{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Sr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Us.create=(e,t)=>new Us({innerType:e,typeName:Hs.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Mr(t)});class Ns extends Kr{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t,common:{...t.common,issues:[]}}});return Hr(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue()}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue()}}removeCatch(){return this._def.innerType}}Ns.create=(e,t)=>new Ns({innerType:e,typeName:Hs.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Mr(t)});class Cs extends Kr{_parse(e){if(this._getType(e)!==Sr.nan){const t=this._getOrReturnCtx(e);return Ur(t,{code:Ar.invalid_type,expected:Sr.nan,received:t.parsedType}),Cr}return{status:"valid",value:e.data}}}Cs.create=e=>new Cs({typeName:Hs.ZodNaN,...Mr(e)});const Zs=Symbol("zod_brand");class zs extends Kr{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class js extends Kr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Cr:"dirty"===e.status?(t.dirty(),Zr(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Cr:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new js({in:e,out:t,typeName:Hs.ZodPipeline})}}const Bs=(e,t={},n)=>e?ss.create().superRefine(((r,s)=>{if(!e(r)){const e="function"==typeof t?t(r):t,i="string"==typeof e?{message:e}:e;s.addIssue({code:"custom",...i,fatal:n})}})):ss.create(),Rs={object:fs.lazycreate};var Hs;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"}(Hs||(Hs={}));const Ls=Yr.create,Ds=Gr.create,$s=Cs.create,Ms=Xr.create,Ks=Qr.create,Vs=es.create,qs=ts.create,Ws=ns.create,Fs=rs.create,Ys=ss.create,Js=is.create,Gs=as.create,Xs=os.create,Qs=us.create,ei=fs.create,ti=fs.strictCreate,ni=ds.create,ri=ps.create,si=gs.create,ii=ys.create,ai=ws.create,oi=vs.create,ui=bs.create,ci=_s.create,hi=xs.create,fi=Ss.create,di=As.create,li=Os.create,pi=ks.create,mi=Ps.create,gi=Ts.create,yi=Is.create,wi=Ps.createWithPreprocess,vi=js.create,bi={string:e=>Yr.create({...e,coerce:!0}),number:e=>Gr.create({...e,coerce:!0}),boolean:e=>Qr.create({...e,coerce:!0}),bigint:e=>Xr.create({...e,coerce:!0}),date:e=>es.create({...e,coerce:!0})},_i=Cr;var xi=Object.freeze({__proto__:null,defaultErrorMap:kr,setErrorMap:function(e){Pr=e},getErrorMap:Tr,makeIssue:Ir,EMPTY_PATH:[],addIssueToContext:Ur,ParseStatus:Nr,INVALID:Cr,DIRTY:Zr,OK:zr,isAborted:jr,isDirty:Br,isValid:Rr,isAsync:Hr,get util(){return xr},ZodParsedType:Sr,getParsedType:Er,ZodType:Kr,ZodString:Yr,ZodNumber:Gr,ZodBigInt:Xr,ZodBoolean:Qr,ZodDate:es,ZodSymbol:ts,ZodUndefined:ns,ZodNull:rs,ZodAny:ss,ZodUnknown:is,ZodNever:as,ZodVoid:os,ZodArray:us,get objectUtil(){return cs},ZodObject:fs,ZodUnion:ds,ZodDiscriminatedUnion:ps,ZodIntersection:gs,ZodTuple:ys,ZodRecord:ws,ZodMap:vs,ZodSet:bs,ZodFunction:_s,ZodLazy:xs,ZodLiteral:Ss,ZodEnum:As,ZodNativeEnum:Os,ZodPromise:ks,ZodEffects:Ps,ZodTransformer:Ps,ZodOptional:Ts,ZodNullable:Is,ZodDefault:Us,ZodCatch:Ns,ZodNaN:Cs,BRAND:Zs,ZodBranded:zs,ZodPipeline:js,custom:Bs,Schema:Kr,ZodSchema:Kr,late:Rs,get ZodFirstPartyTypeKind(){return Hs},coerce:bi,any:Ys,array:Qs,bigint:Ms,boolean:Ks,date:Vs,discriminatedUnion:ri,effect:mi,enum:di,function:ci,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Bs((t=>t instanceof e),t,!0),intersection:si,lazy:hi,literal:fi,map:oi,nan:$s,nativeEnum:li,never:Gs,null:Fs,nullable:yi,number:Ds,object:ei,oboolean:()=>Ks().optional(),onumber:()=>Ds().optional(),optional:gi,ostring:()=>Ls().optional(),pipeline:vi,preprocess:wi,promise:pi,record:ai,set:ui,strictObject:ti,string:Ls,symbol:qs,transformer:mi,tuple:ii,undefined:Ws,union:ni,unknown:Js,void:Xs,NEVER:_i,ZodIssueCode:Ar,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Or});const Si=Object.keys(ue),Ei=xi.string().regex(/^[a-fA-F0-9]$/),Ai=xi.string().regex(/^[a-fA-F0-9]{64}$/),Oi=xi.number().min(0).max(4294967295),ki=xi.bigint(),Pi=xi.array(xi.union([xi.string(),xi.number()])),Ti=xi.enum(Si),Ii=xi.nativeEnum(ue),Ui=xi.string(),Ni=xi.union([Ei,Ti,Ii]).array(),Ci=xi.array(xi.union([Ei,Ni])),Zi=xi.object({value:xi.union([Oi,ki]),scriptPubKey:Pi.optional(),address:Ui.optional()}),zi=xi.object({txid:Ai,vout:Oi,scriptSig:Ni.optional(),sequence:Oi.optional(),prevout:Zi.optional(),witness:Ci.optional()}),ji={TxData:xi.object({version:Oi,vin:xi.array(zi),vout:xi.array(Zi),locktime:Oi.optional()}),TxInput:zi,TxOutput:Zi,witness:Ci,script:Ni,hexstr:Ei,hash:Ai,uint32:Oi,uint64:ki};return e.Address=Ne,e.Input=br,e.Output=wr,e.Script=ve,e.Sequence=yr,e.Sig=hr,e.Transaction=class{constructor(e){"string"==typeof e&&(e=se.hex(e).raw),e instanceof Uint8Array&&(e=tr(e));const t=ji.TxData.parse(e);this.version=t.version,this.vin=t.vin?.map((e=>new br(e)))??[],this.vout=t.vout?.map((e=>new wr(e)))??[],this.locktime=new _r(t.locktime)}get data(){return JSON.parse(JSON.stringify(this))}get base(){return se.hex(Pn(this.data,!0))}get buff(){return se.hex(Pn(this.data))}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get size(){return this.raw.length}get bsize(){return this.base.length}get weight(){return 3*this.bsize+this.size}get vsize(){const e=this.weight%4>0?1:0;return Math.floor(this.weight/4)+e}get hash(){return this.buff.toHash("hash160").reverse().hex}get txid(){return this.base.toHash("hash256").reverse().hex}async export(){const{size:e,weight:t,vsize:n,hex:r}=this;return{txid:this.txid,hash:this.hash,...this.data,size:e,weight:t,vsize:n,hex:r}}},e.Tree=fr,e.Tweak=dr,e.Tx=lr,e.Witness=vr,e}({});
//# sourceMappingURL=bundle.min.js.map